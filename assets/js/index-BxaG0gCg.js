import{j as e}from"./index-DRQO0BkJ.js";import{e as j,u as V,r as s}from"./react-DR1zDSRy.js";import{W as w}from"./worldinfo-service-Dss3L7Fz.js";import{F as r,s as t,g as S,B as y,i as W,C,I as c,R as u,a as i,e as T,d as g,T as f,l as a}from"./antd-Sq0EuMdw.js";import"./echarts-C5AzJBXJ.js";const{Title:P}=W,{Option:I}=g,q=()=>{const{id:d,entryId:m}=j(),o=V(),[p]=r.useForm(),[N,v]=s.useState(null),[k,b]=s.useState(!0),[E,h]=s.useState(!1);s.useEffect(()=>{!d||!m||(b(!0),w.getWorldInfoEntries(d).then(l=>{const n=l.find(x=>x.id===m);n?(v(n),p.setFieldsValue({uid:n.uid,keys:n.keys.join(", "),content:n.content,comment:n.comment,caseSensitive:n.caseSensitive,matchWholeWords:n.matchWholeWords,position:n.position,scanDepth:n.scanDepth,order:n.order,probability:n.probability,enabled:n.enabled})):(t.error("Entry not found."),o(`/worldinfo/${d}`))}).catch(()=>{t.error("Failed to fetch entry details.")}).finally(()=>{b(!1)}))},[d,m,o,p]);const D=async l=>{if(!(!d||!m)){h(!0);try{const n={...l,keys:l.keys.split(",").map(x=>x.trim())};await w.updateWorldInfoEntry(d,m,n),t.success("Entry updated successfully!"),o(`/worldinfo/${d}`)}catch{t.error("Failed to update entry.")}finally{h(!1)}}};return k?e.jsxDEV(S,{size:"large",style:{display:"block",marginTop:"50px"}},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/worldinfo/[id]/[entryId]/index.tsx",lineNumber:73,columnNumber:12},void 0):N?e.jsxDEV("div",{style:{padding:"24px"},children:[e.jsxDEV("div",{style:{display:"flex",alignItems:"center",marginBottom:"16px"},children:[e.jsxDEV(y,{onClick:()=>o(`/worldinfo/${d}`),style:{marginRight:"16px"},children:"Back"},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/worldinfo/[id]/[entryId]/index.tsx",lineNumber:83,columnNumber:13},void 0),e.jsxDEV(P,{level:4,style:{marginBottom:0},children:["Edit Entry:"," ",N.uid]},void 0,!0,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/worldinfo/[id]/[entryId]/index.tsx",lineNumber:86,columnNumber:13},void 0)]},void 0,!0,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/worldinfo/[id]/[entryId]/index.tsx",lineNumber:82,columnNumber:9},void 0),e.jsxDEV(C,{children:e.jsxDEV(r,{form:p,layout:"vertical",onFinish:D,children:[e.jsxDEV(r.Item,{name:"uid",label:"标识符",rules:[{required:!0,message:"请输入标识符"}],children:e.jsxDEV(c,{},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/worldinfo/[id]/[entryId]/index.tsx",lineNumber:95,columnNumber:21},void 0)},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/worldinfo/[id]/[entryId]/index.tsx",lineNumber:94,columnNumber:17},void 0),e.jsxDEV(r.Item,{name:"keys",label:"主要关键字 (逗号分隔)",children:e.jsxDEV(c,{},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/worldinfo/[id]/[entryId]/index.tsx",lineNumber:98,columnNumber:17},void 0)},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/worldinfo/[id]/[entryId]/index.tsx",lineNumber:97,columnNumber:17},void 0),e.jsxDEV(r.Item,{name:"content",label:"内容",rules:[{required:!0,message:"请输入内容"}],children:e.jsxDEV(c.TextArea,{rows:6},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/worldinfo/[id]/[entryId]/index.tsx",lineNumber:101,columnNumber:17},void 0)},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/worldinfo/[id]/[entryId]/index.tsx",lineNumber:100,columnNumber:17},void 0),e.jsxDEV(r.Item,{name:"comment",label:"备忘",children:e.jsxDEV(c.TextArea,{rows:2},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/worldinfo/[id]/[entryId]/index.tsx",lineNumber:104,columnNumber:19},void 0)},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/worldinfo/[id]/[entryId]/index.tsx",lineNumber:103,columnNumber:17},void 0),e.jsxDEV(u,{gutter:16,children:e.jsxDEV(i,{span:12,children:e.jsxDEV(r.Item,{name:"enabled",label:"启用状态",valuePropName:"checked",children:e.jsxDEV(T,{checkedChildren:"启用",unCheckedChildren:"禁用"},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/worldinfo/[id]/[entryId]/index.tsx",lineNumber:109,columnNumber:29},void 0)},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/worldinfo/[id]/[entryId]/index.tsx",lineNumber:108,columnNumber:25},void 0)},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/worldinfo/[id]/[entryId]/index.tsx",lineNumber:107,columnNumber:21},void 0)},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/worldinfo/[id]/[entryId]/index.tsx",lineNumber:106,columnNumber:17},void 0),e.jsxDEV(u,{gutter:16,children:[e.jsxDEV(i,{span:6,children:e.jsxDEV(r.Item,{name:"position",label:"插入位置",children:e.jsxDEV(g,{children:[e.jsxDEV(I,{value:"before_char",children:"角色定义之前"},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/worldinfo/[id]/[entryId]/index.tsx",lineNumber:117,columnNumber:33},void 0),e.jsxDEV(I,{value:"after_char",children:"角色定义之后"},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/worldinfo/[id]/[entryId]/index.tsx",lineNumber:118,columnNumber:33},void 0)]},void 0,!0,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/worldinfo/[id]/[entryId]/index.tsx",lineNumber:116,columnNumber:29},void 0)},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/worldinfo/[id]/[entryId]/index.tsx",lineNumber:115,columnNumber:25},void 0)},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/worldinfo/[id]/[entryId]/index.tsx",lineNumber:114,columnNumber:21},void 0),e.jsxDEV(i,{span:6,children:e.jsxDEV(r.Item,{name:"scanDepth",label:"深度",children:e.jsxDEV(f,{style:{width:"100%"}},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/worldinfo/[id]/[entryId]/index.tsx",lineNumber:124,columnNumber:29},void 0)},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/worldinfo/[id]/[entryId]/index.tsx",lineNumber:123,columnNumber:25},void 0)},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/worldinfo/[id]/[entryId]/index.tsx",lineNumber:122,columnNumber:21},void 0),e.jsxDEV(i,{span:6,children:e.jsxDEV(r.Item,{name:"order",label:"顺序",children:e.jsxDEV(f,{style:{width:"100%"}},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/worldinfo/[id]/[entryId]/index.tsx",lineNumber:129,columnNumber:29},void 0)},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/worldinfo/[id]/[entryId]/index.tsx",lineNumber:128,columnNumber:25},void 0)},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/worldinfo/[id]/[entryId]/index.tsx",lineNumber:127,columnNumber:21},void 0),e.jsxDEV(i,{span:6,children:e.jsxDEV(r.Item,{name:"probability",label:"触发概率 %",children:e.jsxDEV(f,{min:0,max:100,style:{width:"100%"}},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/worldinfo/[id]/[entryId]/index.tsx",lineNumber:134,columnNumber:29},void 0)},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/worldinfo/[id]/[entryId]/index.tsx",lineNumber:133,columnNumber:25},void 0)},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/worldinfo/[id]/[entryId]/index.tsx",lineNumber:132,columnNumber:21},void 0)]},void 0,!0,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/worldinfo/[id]/[entryId]/index.tsx",lineNumber:113,columnNumber:17},void 0),e.jsxDEV(u,{gutter:16,children:[e.jsxDEV(i,{span:12,children:e.jsxDEV(r.Item,{name:"caseSensitive",label:"区分大小写",valuePropName:"checked",children:e.jsxDEV(a,{},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/worldinfo/[id]/[entryId]/index.tsx",lineNumber:141,columnNumber:29},void 0)},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/worldinfo/[id]/[entryId]/index.tsx",lineNumber:140,columnNumber:25},void 0)},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/worldinfo/[id]/[entryId]/index.tsx",lineNumber:139,columnNumber:21},void 0),e.jsxDEV(i,{span:12,children:e.jsxDEV(r.Item,{name:"matchWholeWords",label:"全词匹配",valuePropName:"checked",children:e.jsxDEV(a,{},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/worldinfo/[id]/[entryId]/index.tsx",lineNumber:146,columnNumber:29},void 0)},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/worldinfo/[id]/[entryId]/index.tsx",lineNumber:145,columnNumber:25},void 0)},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/worldinfo/[id]/[entryId]/index.tsx",lineNumber:144,columnNumber:21},void 0)]},void 0,!0,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/worldinfo/[id]/[entryId]/index.tsx",lineNumber:138,columnNumber:17},void 0),e.jsxDEV(u,{gutter:16,children:[e.jsxDEV(i,{span:8,children:e.jsxDEV(r.Item,{name:"disable",valuePropName:"checked",children:e.jsxDEV(a,{children:"不可递归"},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/worldinfo/[id]/[entryId]/index.tsx",lineNumber:153,columnNumber:21},void 0)},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/worldinfo/[id]/[entryId]/index.tsx",lineNumber:152,columnNumber:21},void 0)},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/worldinfo/[id]/[entryId]/index.tsx",lineNumber:151,columnNumber:17},void 0),e.jsxDEV(i,{span:8,children:e.jsxDEV(r.Item,{name:"prevent_recursion",valuePropName:"checked",children:e.jsxDEV(a,{children:"防止进一步递归"},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/worldinfo/[id]/[entryId]/index.tsx",lineNumber:158,columnNumber:21},void 0)},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/worldinfo/[id]/[entryId]/index.tsx",lineNumber:157,columnNumber:21},void 0)},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/worldinfo/[id]/[entryId]/index.tsx",lineNumber:156,columnNumber:17},void 0),e.jsxDEV(i,{span:8,children:e.jsxDEV(r.Item,{name:"delay_recursion",valuePropName:"checked",children:e.jsxDEV(a,{children:"延迟到递归"},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/worldinfo/[id]/[entryId]/index.tsx",lineNumber:163,columnNumber:21},void 0)},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/worldinfo/[id]/[entryId]/index.tsx",lineNumber:162,columnNumber:21},void 0)},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/worldinfo/[id]/[entryId]/index.tsx",lineNumber:161,columnNumber:17},void 0)]},void 0,!0,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/worldinfo/[id]/[entryId]/index.tsx",lineNumber:150,columnNumber:17},void 0),e.jsxDEV(u,{gutter:16,children:[e.jsxDEV(i,{span:6,children:e.jsxDEV(r.Item,{label:"确定优先极",children:e.jsxDEV(a,{},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/worldinfo/[id]/[entryId]/index.tsx",lineNumber:170,columnNumber:29},void 0)},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/worldinfo/[id]/[entryId]/index.tsx",lineNumber:169,columnNumber:25},void 0)},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/worldinfo/[id]/[entryId]/index.tsx",lineNumber:168,columnNumber:21},void 0),e.jsxDEV(i,{span:6,children:e.jsxDEV(r.Item,{name:"priority",label:"组权重",children:e.jsxDEV(f,{style:{width:"100%"}},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/worldinfo/[id]/[entryId]/index.tsx",lineNumber:175,columnNumber:25},void 0)},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/worldinfo/[id]/[entryId]/index.tsx",lineNumber:174,columnNumber:25},void 0)},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/worldinfo/[id]/[entryId]/index.tsx",lineNumber:173,columnNumber:21},void 0),e.jsxDEV(i,{span:6,children:e.jsxDEV(r.Item,{label:"黏性",children:e.jsxDEV(a,{children:"无黏性"},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/worldinfo/[id]/[entryId]/index.tsx",lineNumber:180,columnNumber:29},void 0)},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/worldinfo/[id]/[entryId]/index.tsx",lineNumber:179,columnNumber:25},void 0)},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/worldinfo/[id]/[entryId]/index.tsx",lineNumber:178,columnNumber:21},void 0),e.jsxDEV(i,{span:6,children:e.jsxDEV(r.Item,{label:"排除",children:e.jsxDEV(a,{children:"排除"},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/worldinfo/[id]/[entryId]/index.tsx",lineNumber:185,columnNumber:29},void 0)},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/worldinfo/[id]/[entryId]/index.tsx",lineNumber:184,columnNumber:25},void 0)},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/worldinfo/[id]/[entryId]/index.tsx",lineNumber:183,columnNumber:21},void 0)]},void 0,!0,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/worldinfo/[id]/[entryId]/index.tsx",lineNumber:167,columnNumber:17},void 0),e.jsxDEV(r.Item,{children:e.jsxDEV(y,{type:"primary",htmlType:"submit",loading:E,children:"Save Changes"},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/worldinfo/[id]/[entryId]/index.tsx",lineNumber:190,columnNumber:21},void 0)},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/worldinfo/[id]/[entryId]/index.tsx",lineNumber:189,columnNumber:17},void 0)]},void 0,!0,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/worldinfo/[id]/[entryId]/index.tsx",lineNumber:93,columnNumber:13},void 0)},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/worldinfo/[id]/[entryId]/index.tsx",lineNumber:92,columnNumber:9},void 0)]},void 0,!0,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/worldinfo/[id]/[entryId]/index.tsx",lineNumber:81,columnNumber:5},void 0):null};export{q as default};
