import{D as re,d as a}from"./index-JkWopOOq.js";var oe;let ne;function ce(o,t,e,r,i,b){var D,c,u,w,C,I,P,ie=Symbol.metadata||Symbol.for("Symbol.metadata"),V=Object.defineProperty,k=Object.create,x=[k(null),k(null)],G=t.length;function T(n,g,m){return function(s,d){g&&(d=s,s=o);for(var v=0;v<n.length;v++)d=n[v].apply(s,m?[d]:[]);return m?d:s}}function S(n,g,m,s){if(typeof n!="function"&&(s||n!==void 0))throw new TypeError(g+" must "+(m||"be")+" a function"+(s?"":" or undefined"));return n}function J(n,g,m,s,d,v,R,y,f,A,Q){function O(p){if(!Q(p))throw new TypeError("Attempted to access private element on non-instance")}var W=[].concat(g[0]),X=g[3],$=!R,U=d===1,Y=d===3,Z=d===4,j=d===2;function E(p,M,ee){return function(B,te){return M&&(te=B,B=n),ee&&ee(B),l[p].call(B,te)}}if(!$){var l={},z=[],F=Y?"get":Z||U?"set":"value";if(f?(A||U?l={get:ae(function(){return X(this)},s,"get"),set:function(p){g[4](this,p)}}:l[F]=X,A||ae(l[F],s,j?"":F)):A||(l=Object.getOwnPropertyDescriptor(n,s)),!A&&!f){if((c=x[+y][s])&&(c^d)!=7)throw Error("Decorating two elements with the same name ("+l[F].name+") is not supported yet");x[+y][s]=d<3?1:d}}for(var h=n,_=W.length-1;_>=0;_-=m?2:1){var H=S(W[_],"A decorator","be",!0),N=m?W[_-1]:void 0,K={},q={kind:["field","accessor","method","getter","setter","class"][d],name:s,metadata:D,addInitializer:(function(p,M){if(p.v)throw new TypeError("attempted to call addInitializer after decoration was finished");S(M,"An initializer","be",!0),v.push(M)}).bind(null,K)};if($)c=H.call(N,h,q),K.v=1,S(c,"class decorators","return")&&(h=c);else if(q.static=y,q.private=f,c=q.access={has:f?Q.bind():function(p){return s in p}},Z||(c.get=f?j?function(p){return O(p),l.value}:E("get",0,O):function(p){return p[s]}),j||Y||(c.set=f?E("set",0,O):function(p,M){p[s]=M}),h=H.call(N,U?{get:l.get,set:l.set}:l[F],q),K.v=1,U){if(typeof h=="object"&&h)(c=S(h.get,"accessor.get"))&&(l.get=c),(c=S(h.set,"accessor.set"))&&(l.set=c),(c=S(h.init,"accessor.init"))&&z.unshift(c);else if(h!==void 0)throw new TypeError("accessor decorators must return an object with get, set, or init properties or undefined")}else S(h,(A?"field":"method")+" decorators","return")&&(A?z.unshift(h):l[F]=h)}return d<2&&R.push(T(z,y,1),T(v,y,0)),A||$||(f?U?R.splice(-1,0,E("get",y),E("set",y)):R.push(j?l[F]:S.call.bind(l[F])):V(n,s,l)),h}function L(n){return V(n,ie,{configurable:!0,enumerable:!0,value:D})}return D=k(D??null),C=[],I=function(n){n&&C.push(T(n))},P=function(n,g){for(var m=0;m<e.length;m++){var s=e[m],d=s[1],v=7&d;if((8&d)==n&&!v==g){var R=s[2],y=!!s[3],f=16&d;J(n?o:o.prototype,s,f,y?"#"+R:de(R),v,v<2?[]:n?w=w||[]:u=u||[],C,!!n,y,g,n&&y?function(A){return ue(A)===o}:i)}}},P(8,0),P(0,0),P(8,1),P(0,1),I(u),I(w),c=C,G||L(o),{e:c,get c(){var n=[];return G&&[L(o=J(o,[t],r,o.name,5,n)),T(n,1)]}}}function de(o){var t=le(o,"string");return typeof t=="symbol"?t:t+""}function le(o,t){if(typeof o!="object"||!o)return o;var e=o[Symbol.toPrimitive];if(e!==void 0){var r=e.call(o,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(o)}function ae(o,t,e){typeof t=="symbol"&&(t=(t=t.description)?"["+t+"]":"");try{Object.defineProperty(o,"name",{configurable:!0,value:e?e+" "+t:t})}catch{}return o}function ue(o){if(Object(o)!==o)throw TypeError("right-hand side of 'in' should be an object, got "+(o!==null?typeof o:"null"));return o}let se;class pe{constructor(){this.adminApi=a.admin}async adminDeposit(t){try{await a.admin.adminDeposit({adminDepositRequestDto:t})}catch(e){throw console.error("Failed to deposit:",e),e}}async adminWithdraw(t){try{await a.admin.adminWithdraw({adminWithdrawRequestDto:t})}catch(e){throw console.error("Failed to withdraw:",e),e}}async assignRole(t,e){try{await a.admin.assignRole({userId:t,assignRoleDto:e})}catch(r){throw console.error("Failed to assign role:",r),r}}async auditCharacter(t,e,r){try{return(await this.adminApi.auditCharacter({id:t,userId:e,auditCharacterRequestDto:r})).data}catch(i){throw console.error("Failed to audit character:",i),i}}async checkProviderHealth(t){try{return(await a.admin.checkProviderHealth({id:t})).data}catch(e){throw console.error("Failed to check provider health:",e),e}}async createModel(t){try{return(await a.admin.createModel({createModelRequestDto:t})).data}catch(e){throw console.error("Failed to create model:",e),e}}async createModelParameter(t){try{return(await a.admin.createModelParameter({createModelParameterRequestDto:t})).data}catch(e){throw console.error("Failed to create model parameter:",e),e}}async createProvider(t){try{return(await a.admin.createProvider({createProviderRequestDto:t})).data}catch(e){throw console.error("Failed to create provider:",e),e}}async deleteModel(t){try{return(await a.admin.deleteModel({id:t})).data}catch(e){throw console.error("Failed to delete model:",e),e}}async deleteModelParameter(t){try{await a.admin.deleteModelParameter({id:t})}catch(e){throw console.error("Failed to delete model parameter:",e),e}}async deleteProvider(t){try{return(await a.admin.deleteProvider({id:t})).data}catch(e){throw console.error("Failed to delete provider:",e),e}}async getAllCharacters(t){try{return(await a.admin.searchCharacters(t)).data}catch(e){throw console.error("Failed to get all characters:",e),e}}async getAllModels(){try{return(await a.admin.getAllModels()).data}catch(t){throw console.error("Failed to get all models:",t),t}}async getAllParameters(t,e,r){try{return(await a.admin.getAllParameters({page:t,limit:e,modelId:r||""})).data}catch(i){throw console.error("Failed to get all parameters:",i),i}}async getAllProviders(){try{return(await a.admin.getAllProviders()).data}catch(t){throw console.error("Failed to get all providers:",t),t}}async getCommissionSettings(){try{return(await a.admin.getCommissionSettings()).data}catch(t){throw console.error("Failed to get commission settings:",t),t}}async getComprehensiveInviteDataByUserId(t){try{return(await a.admin.getComprehensiveInviteDataByUserId({userId:t})).data}catch(e){throw console.error("Failed to get comprehensive invite data:",e),e}}async getModelById(t){try{return(await a.admin.getModelById({id:t})).data}catch(e){throw console.error("Failed to get model by id:",e),e}}async getModelParameter(t){try{return(await a.admin.getModelParameter({id:t})).data}catch(e){throw console.error("Failed to get model parameter:",e),e}}async getProvider(t){try{return(await a.admin.getProvider({id:t})).data}catch(e){throw console.error("Failed to get provider:",e),e}}async getReferralTreeByUserId(t){try{return(await a.admin.getReferralTreeByUserId({userId:t})).data}catch(e){throw console.error("Failed to get referral tree:",e),e}}async getUserById(t){try{return(await a.admin.getUserById({userId:t})).data}catch(e){throw console.error("Failed to get user by id:",e),e}}async getUserTransactions(t,e,r,i={}){try{return(await a.admin.getUserTransactions({userId:t,page:e,limit:r,...i})).data}catch(b){throw console.error("Failed to get user transactions:",b),b}}async getUserWallet(t){try{return(await a.admin.getUserWallet({userId:t})).data}catch(e){throw console.error("Failed to get user wallet:",e),e}}async searchUsers(t,e,r={}){try{console.log("AdminService.searchUsers 调用参数:",{page:t,limit:e,options:r});const i=await a.admin.searchUsers({page:t,limit:e,...r});return console.log("AdminService.searchUsers 响应:",i.data),i.data}catch(i){throw console.error("Failed to search users:",i),i}}async setCommissionSettings(t){try{await a.admin.setCommissionSettings({commissionSettingsRequestDto:t})}catch(e){throw console.error("Failed to set commission settings:",e),e}}async setUserCommissionRates(t){try{await a.admin.setUserCommissionRates({setUserCommissionRatesRequestDto:t})}catch(e){throw console.error("Failed to set user commission rates:",e),e}}async updateCharacter(t,e){try{return(await a.admin.updateCharacter({id:t,updateCharacterRequestDto:e})).data}catch(r){throw console.error("Failed to update character:",r),r}}async updateModel(t,e){try{return(await a.admin.updateModel({id:t,createModelRequestDto:e})).data}catch(r){throw console.error("Failed to update model:",r),r}}async updateModelParameter(t,e){try{return(await a.admin.updateModelParameter({id:t,updateModelParameterRequestDto:e})).data}catch(r){throw console.error("Failed to update model parameter:",r),r}}async updateModelStatus(t,e){try{return(await a.admin.updateModelStatus({id:t,updateStatusRequestDto:e})).data}catch(r){throw console.error("Failed to update model status:",r),r}}async updateProvider(t,e){try{return(await a.admin.updateProvider({id:t,createProviderRequestDto:e})).data}catch(r){throw console.error("Failed to update provider:",r),r}}async updateProviderStatus(t,e){try{return(await a.admin.updateProviderStatus({id:t,updateStatusRequestDto:e})).data}catch(r){throw console.error("Failed to update provider status:",r),r}}async updateCharacterStatus(t){try{return(await a.admin.updateCharacterStatus({id:t})).data}catch(e){throw console.error("Failed to update character status:",e),e}}async updateCharacterVisibility(t){try{return(await a.admin.updateCharacterVisibility({id:t})).data}catch(e){throw console.error("Failed to update character visibility:",e),e}}async createSetting(t){try{return(await a.admin.createSetting({createSettingDto:t})).data}catch(e){throw console.error("Failed to create setting:",e),e}}async getAllSettings(t){try{return(await a.admin.getAllSettings({category:t||""})).data}catch(e){throw console.error("Failed to get all settings:",e),e}}async updateSetting(t,e){try{return(await a.admin.updateSetting({key:t,updateSettingDto:e})).data}catch(r){throw console.error("Failed to update setting:",r),r}}async reloadSettings(){try{await a.admin.reloadSettings()}catch(t){throw console.error("Failed to reload settings:",t),t}}async createActivityDefinition(t){try{return(await this.adminApi.createActivityDefinition({adminCreateActivityRequestDto:t})).data}catch(e){throw console.error("Failed to create activity:",e),e}}async findAllActivityDefinitions(t,e,r,i){var D,c;console.log("AdminService.findAllActivities 开始请求, 参数:",{page:t,limit:e,status:r,type:i});const b=Date.now();try{const u={page:t,limit:e};r&&(u.status=r,console.log(`添加状态过滤条件: ${r}`)),i&&(u.type=i,console.log(`添加类型过滤条件: ${i}`)),console.log("调用 API 参数:",u);const w=await Promise.race([this.adminApi.findAllActivityDefinitions(u),new Promise((I,P)=>setTimeout(()=>P(new Error("API请求超时 - 15秒")),15e3))]),C=Date.now();return console.log(`AdminService.findAllActivities 请求成功, 耗时: ${C-b}ms, 返回数据条数: ${((c=(D=w==null?void 0:w.data)==null?void 0:D.items)==null?void 0:c.length)||0}`),w.data}catch(u){const w=Date.now();throw console.error(`AdminService.findAllActivities 请求失败, 耗时: ${w-b}ms:`,u),u instanceof Error&&console.error("错误详情:",{name:u.name,message:u.message,stack:u.stack}),u}}async findOneActivityDefinition(t){try{return(await this.adminApi.findOneActivityDefinition({activityId:t})).data}catch(e){throw console.error("Failed to find activity:",e),e}}async removeActivityDefinition(t){try{await this.adminApi.removeActivityDefinition({activityId:t})}catch(e){throw console.error("Failed to remove activity:",e),e}}async updateActivityDefinition(t,e){try{return(await this.adminApi.updateActivityDefinition({activityId:t,adminUpdateActivityRequestDto:e})).data}catch(r){throw console.error("Failed to update activity:",r),r}}async updateActivityStatus(t,e){try{return(await this.adminApi.updateActivityDefinition({activityId:t,adminUpdateActivityRequestDto:{status:e}})).data}catch(r){throw console.error("Failed to update activity status:",r),r}}async updateActivityDefinitionStatus(t){try{return(await this.adminApi.updateActivityDefinitionStatus({activityId:t})).data}catch(e){throw console.error("Failed to update activity status (generic):",e),e}}async setModelParameterPreset(t,e){try{return(await a.admin.setModelParameterPreset({id:t,setPresetRequestDto:{presetId:e}})).data}catch(r){throw console.error("Failed to set model parameter preset:",r),r}}}oe=pe;[se,ne]=ce(oe,[re,re.Singleton],[],1).c;ne();const me=new se;export{me as A};
