import{j as e}from"./index-DRQO0BkJ.js";import{e as y,u as I,r as l}from"./react-DR1zDSRy.js";import{A as c}from"./admin-service-BUpGHG4_.js";import{F as a,s as m,g as C,B as u,h as P,i as U,C as A,I as t,d as r}from"./antd-Sq0EuMdw.js";import"./echarts-C5AzJBXJ.js";const{Title:O}=U;function q(){const d=y().id,o=I(),[s]=a.useForm(),[p,b]=l.useState(null),[g,h]=l.useState(!0),[w,v]=l.useState(!1),[k,N]=l.useState(!1);l.useEffect(()=>{if(!d){m.error("供应商ID无效"),o("/modelprovider");return}async function i(){try{h(!0);const n=(await c.getAllProviders()).find(V=>V.id===d);if(!n){m.error("供应商不存在"),o("/modelprovider");return}b(n),s.setFieldsValue({name:n.name,description:n.description,websiteUrl:n.websiteUrl,apiDocUrl:n.apiDocUrl,apiBaseUrl:n.apiBaseUrl,authType:n.authType,providerType:n.providerType})}catch(x){console.error("获取供应商详情失败:",x),m.error("获取供应商详情失败，请稍后重试"),o("/modelprovider")}finally{h(!1)}}i()},[d,s,o]);const D=()=>{N(!0)},j=async()=>{if(!d){m.error("供应商ID无效");return}try{await s.validateFields();const i=s.getFieldsValue();v(!0),await c.updateProvider(d,i),m.success("供应商更新成功"),N(!1),o("/modelprovider")}catch(i){console.error("更新供应商失败:",i),m.error(`更新供应商失败: ${i.message||"请稍后重试"}`)}finally{v(!1)}},f=()=>{if(k){m.warning("您有未保存的更改");return}o("/modelprovider")},E=async()=>{if(d)try{const i=await c.checkProviderHealth(d);m.success(`健康状态检查完成: ${i.message||"健康"}`)}catch(i){console.error("检查供应商健康状态失败:",i),m.error("健康状态检查失败")}};return g?e.jsxDEV("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"400px"},children:e.jsxDEV(C,{size:"large"},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/modelprovider/[id]/edit.tsx",lineNumber:127,columnNumber:9},this)},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/modelprovider/[id]/edit.tsx",lineNumber:126,columnNumber:7},this):p?e.jsxDEV("div",{style:{padding:"24px"},children:[e.jsxDEV("div",{style:{marginBottom:"24px",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsxDEV("div",{style:{display:"flex",alignItems:"center"},children:[e.jsxDEV(u,{type:"text",icon:e.jsxDEV(P,{},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/modelprovider/[id]/edit.tsx",lineNumber:143,columnNumber:19},this),onClick:f,style:{marginRight:"16px"},children:"返回列表"},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/modelprovider/[id]/edit.tsx",lineNumber:141,columnNumber:11},this),e.jsxDEV(O,{level:3,style:{margin:0},children:["编辑供应商:"," ",p.name]},void 0,!0,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/modelprovider/[id]/edit.tsx",lineNumber:149,columnNumber:11},this)]},void 0,!0,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/modelprovider/[id]/edit.tsx",lineNumber:140,columnNumber:9},this),e.jsxDEV("div",{children:[e.jsxDEV(u,{onClick:E,style:{marginRight:"8px"},children:"检查健康状态"},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/modelprovider/[id]/edit.tsx",lineNumber:156,columnNumber:11},this),e.jsxDEV(u,{onClick:f,style:{marginRight:"8px"},children:"取消"},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/modelprovider/[id]/edit.tsx",lineNumber:162,columnNumber:11},this),e.jsxDEV(u,{type:"primary",loading:w,onClick:j,children:"保存"},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/modelprovider/[id]/edit.tsx",lineNumber:168,columnNumber:11},this)]},void 0,!0,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/modelprovider/[id]/edit.tsx",lineNumber:155,columnNumber:9},this)]},void 0,!0,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/modelprovider/[id]/edit.tsx",lineNumber:139,columnNumber:7},this),e.jsxDEV(A,{children:e.jsxDEV(a,{form:s,layout:"vertical",onValuesChange:D,autoComplete:"off",children:[e.jsxDEV(a.Item,{name:"name",label:"供应商名称",rules:[{required:!0,message:"请输入供应商名称"}],children:e.jsxDEV(t,{placeholder:"请输入供应商名称"},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/modelprovider/[id]/edit.tsx",lineNumber:191,columnNumber:13},this)},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/modelprovider/[id]/edit.tsx",lineNumber:186,columnNumber:11},this),e.jsxDEV(a.Item,{name:"description",label:"供应商描述",children:e.jsxDEV(t.TextArea,{rows:3,placeholder:"请输入供应商描述"},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/modelprovider/[id]/edit.tsx",lineNumber:198,columnNumber:13},this)},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/modelprovider/[id]/edit.tsx",lineNumber:194,columnNumber:11},this),e.jsxDEV(a.Item,{name:"websiteUrl",label:"官网URL",children:e.jsxDEV(t,{placeholder:"请输入官网URL"},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/modelprovider/[id]/edit.tsx",lineNumber:205,columnNumber:13},this)},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/modelprovider/[id]/edit.tsx",lineNumber:201,columnNumber:11},this),e.jsxDEV(a.Item,{name:"apiDocUrl",label:"API文档URL",children:e.jsxDEV(t,{placeholder:"请输入API文档URL"},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/modelprovider/[id]/edit.tsx",lineNumber:212,columnNumber:13},this)},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/modelprovider/[id]/edit.tsx",lineNumber:208,columnNumber:11},this),e.jsxDEV(a.Item,{name:"apiKey",label:"API密钥",help:"留空表示不修改现有密钥",children:e.jsxDEV(t.Password,{placeholder:"留空表示不修改"},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/modelprovider/[id]/edit.tsx",lineNumber:220,columnNumber:13},this)},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/modelprovider/[id]/edit.tsx",lineNumber:215,columnNumber:11},this),e.jsxDEV(a.Item,{name:"apiBaseUrl",label:"API基础URL",children:e.jsxDEV(t,{placeholder:"请输入API基础URL"},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/modelprovider/[id]/edit.tsx",lineNumber:227,columnNumber:13},this)},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/modelprovider/[id]/edit.tsx",lineNumber:223,columnNumber:11},this),e.jsxDEV(a.Item,{name:"authType",label:"认证类型",rules:[{required:!0,message:"请选择认证类型"}],children:e.jsxDEV(r,{children:[e.jsxDEV(r.Option,{value:"api_key",children:"API密钥"},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/modelprovider/[id]/edit.tsx",lineNumber:236,columnNumber:15},this),e.jsxDEV(r.Option,{value:"oauth",children:"OAuth"},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/modelprovider/[id]/edit.tsx",lineNumber:237,columnNumber:15},this),e.jsxDEV(r.Option,{value:"custom",children:"自定义"},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/modelprovider/[id]/edit.tsx",lineNumber:238,columnNumber:15},this)]},void 0,!0,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/modelprovider/[id]/edit.tsx",lineNumber:235,columnNumber:13},this)},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/modelprovider/[id]/edit.tsx",lineNumber:230,columnNumber:11},this),e.jsxDEV(a.Item,{name:"providerType",label:"供应商类型",rules:[{required:!0,message:"请选择供应商类型"}],children:e.jsxDEV(r,{children:[e.jsxDEV(r.Option,{value:"openai",children:"OpenAI"},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/modelprovider/[id]/edit.tsx",lineNumber:248,columnNumber:15},this),e.jsxDEV(r.Option,{value:"anthropic",children:"Anthropic"},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/modelprovider/[id]/edit.tsx",lineNumber:249,columnNumber:15},this),e.jsxDEV(r.Option,{value:"cohere",children:"Cohere"},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/modelprovider/[id]/edit.tsx",lineNumber:250,columnNumber:15},this),e.jsxDEV(r.Option,{value:"mistralai",children:"Mistral"},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/modelprovider/[id]/edit.tsx",lineNumber:251,columnNumber:15},this),e.jsxDEV(r.Option,{value:"deepseek",children:"Deepseek"},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/modelprovider/[id]/edit.tsx",lineNumber:252,columnNumber:15},this),e.jsxDEV(r.Option,{value:"google",children:"Google"},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/modelprovider/[id]/edit.tsx",lineNumber:253,columnNumber:15},this),e.jsxDEV(r.Option,{value:"custom",children:"自定义"},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/modelprovider/[id]/edit.tsx",lineNumber:254,columnNumber:15},this)]},void 0,!0,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/modelprovider/[id]/edit.tsx",lineNumber:247,columnNumber:13},this)},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/modelprovider/[id]/edit.tsx",lineNumber:242,columnNumber:11},this)]},void 0,!0,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/modelprovider/[id]/edit.tsx",lineNumber:180,columnNumber:9},this)},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/modelprovider/[id]/edit.tsx",lineNumber:179,columnNumber:7},this)]},void 0,!0,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/modelprovider/[id]/edit.tsx",lineNumber:137,columnNumber:5},this):null}export{q as default};
