import{j as e,u as p,ba as u,bb as c,bc as d}from"./index-DszekyUW.js";import"./react-Dz_Dwpfc.js";import{S as g}from"./SaveButton-C3JGOBpf.js";import{F as x}from"./FormContainer-BCaM3ms2.js";import{u as j}from"./useForm-DxTG7sk9.js";import{u as h}from"./useMutation-CASjXjze.js";import{e as y}from"./role-DTgTBYzG.js";import{S as f,F as r,I as m,p as U}from"./antd-CXRY_8Ve.js";import"./echarts-C9Czxobr.js";import"./Button-DhEq2PaS.js";import"./BackButton-A8l5lw-6.js";import"./useWindowSize-DSNN33pu.js";function b({value:s,onChange:n}){const{data:a}=h({queryKey:["roleAll"],queryFn:()=>y()}),o=(a==null?void 0:a.map(t=>({label:t.name,value:t.id})))||[];return e.jsx(f,{value:s,onChange:n,options:o,mode:"multiple",allowClear:!0})}function R(){const{t:s}=p(),{title:n,isCreateMode:a,formProps:o,isLoading:t,handleSubmit:i}=j({key:"user",getApiFn:u,createApiFn:c,updateApiFn:d,initialValues:{username:null,password:null,nickName:null,email:null,phone:null,isFrozen:!1,roles:[]}}),l={username:[{required:!0,message:s("page.systemUser.rules.username")}],password:[{required:!0,message:s("page.systemUser.rules.password")}],nickName:[{required:!0,message:s("page.systemUser.rules.nickName")}],email:[{required:!0,message:s("page.systemUser.rules.email")}],phone:[{required:!0,message:s("page.systemUser.rules.phone")}]};return e.jsx(x,{title:n,children:e.jsxs(r,{...o,children:[e.jsx(r.Item,{label:s("page.systemUser.username"),name:"username",rules:l.username,children:e.jsx(m,{autoComplete:"off"})}),a&&e.jsx(r.Item,{label:s("page.systemUser.password"),name:"password",rules:l.password,children:e.jsx(m.Password,{})}),e.jsx(r.Item,{label:s("page.systemUser.nickName"),name:"nickName",rules:l.nickName,children:e.jsx(m,{})}),e.jsx(r.Item,{label:s("page.systemUser.email"),name:"email",rules:l.email,children:e.jsx(m,{})}),e.jsx(r.Item,{label:s("page.systemUser.phone"),name:"phone",rules:l.phone,children:e.jsx(m,{})}),e.jsx(r.Item,{label:s("page.systemUser.isFrozen"),name:"isFrozen",valuePropName:"checked",children:e.jsx(U,{})}),e.jsx(r.Item,{label:s("page.systemUser.roles"),name:"roles",children:e.jsx(b,{})}),e.jsx(r.Item,{wrapperCol:{offset:12,span:8},children:e.jsx(g,{type:"primary",loading:t,onClick:i})})]})})}export{R as default};
