import{u as y,j as r,M as s,y as M}from"./index-DkoX4alL.js";import{r as h}from"./react-DR1zDSRy.js";import{a as D,b as w,c as j,u as k}from"./menu-Xj8XW4rk.js";import{S as F}from"./SaveButton-CpFscWqb.js";import{F as I}from"./FormContainer-CrXyPHiD.js";import{u as T}from"./useForm-CQJcyc7r.js";import{u as R}from"./usePageTransfer-MQhW3Npc.js";import{u as A}from"./useMutation-JKeScO7T.js";import{i as U}from"./isNil-CHIgUVhi.js";import{I as o,F as t,K as C,T as S,e as V}from"./antd-C5ilffvX.js";import"./echarts-C5AzJBXJ.js";import"./Button-COkfsoMp.js";import"./useWindowSize-ncjCtajF.js";function O({value:m}){var u;const{t:d}=y(),{data:n}=A({queryKey:["flatMenu"],queryFn:D}),c=U(m)?d("page.systemMenu.topMenu"):(u=n==null?void 0:n.find(N=>N.id===m))==null?void 0:u.title;return r.jsxDEV(o,{value:c,disabled:!0},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/system/menu/components/ParentName.tsx",lineNumber:25,columnNumber:10},this)}function X(){const{t:m}=y(),{getTransferredData:d}=R(),n=d(),{title:c,isCreateMode:u,isEditMode:N,form:p,formProps:b,isLoading:f,handleSubmit:g}=T({key:"menu",getApiFn:w,createApiFn:j,updateApiFn:k,initialValues:{parentId:n==null?void 0:n.id,title:null,type:null,icon:null,path:null,code:null,description:null,i18nKey:null,sort:0,isShow:!0}}),e=t.useWatch([],p),x=u?n==null?void 0:n.id:e==null?void 0:e.parentId,E=h.useMemo(()=>{const i=[{label:m("page.systemMenu.directory"),value:s.DIRECTORY},{label:m("page.systemMenu.menu"),value:s.MENU},{label:m("page.systemMenu.feature"),value:s.FEATURE}];return u?n!=null&&n.id?n.type===s.DIRECTORY?i.filter(a=>a.value!==s.FEATURE):n.type===s.MENU?i.filter(a=>a.value===s.FEATURE):i:i.filter(a=>a.value!==s.FEATURE):i.filter(a=>a.value===(e==null?void 0:e.type))},[u,n==null?void 0:n.id,n==null?void 0:n.type,e==null?void 0:e.type,m]),l=h.useMemo(()=>{const i={title:[{required:!0,message:m("page.systemMenu.rules.title")}],type:[{required:!0,message:m("page.systemMenu.rules.type")}]};return(e==null?void 0:e.type)===s.MENU?{...i,path:[{required:!0,message:m("page.systemMenu.rules.path")}]}:i},[e==null?void 0:e.type,m]),v=i=>{p.setFieldsValue({icon:null,path:null,code:null}),(i.target.value===s.DIRECTORY||i.target.value===s.FEATURE)&&(p.resetFields(["icon","path","code"]),p.validateFields(["path"]))};return r.jsxDEV(I,{title:c,children:r.jsxDEV(t,{...b,onFinish:g,children:[r.jsxDEV(t.Item,{label:m("page.systemMenu.parentMenu"),children:r.jsxDEV(O,{value:x},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/system/menu/[mode]/[id].tsx",lineNumber:123,columnNumber:11},this)},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/system/menu/[mode]/[id].tsx",lineNumber:122,columnNumber:9},this),r.jsxDEV(t.Item,{label:m("page.systemMenu.title"),name:"title",rules:l.title,children:r.jsxDEV(o,{},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/system/menu/[mode]/[id].tsx",lineNumber:131,columnNumber:11},this)},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/system/menu/[mode]/[id].tsx",lineNumber:126,columnNumber:9},this),r.jsxDEV(t.Item,{label:m("page.systemMenu.description"),name:"description",children:r.jsxDEV(o.TextArea,{},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/system/menu/[mode]/[id].tsx",lineNumber:138,columnNumber:11},this)},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/system/menu/[mode]/[id].tsx",lineNumber:134,columnNumber:9},this),r.jsxDEV(t.Item,{label:m("page.systemMenu.type"),name:"type",rules:l.type,children:r.jsxDEV(C.Group,{optionType:"button",options:E,disabled:N,onChange:v},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/system/menu/[mode]/[id].tsx",lineNumber:146,columnNumber:11},this)},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/system/menu/[mode]/[id].tsx",lineNumber:141,columnNumber:9},this),(e==null?void 0:e.type)&&e.type!==s.FEATURE&&r.jsxDEV(t.Item,{label:m("page.systemMenu.icon"),name:"icon",children:r.jsxDEV(M,{},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/system/menu/[mode]/[id].tsx",lineNumber:159,columnNumber:13},this)},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/system/menu/[mode]/[id].tsx",lineNumber:155,columnNumber:9},this),(e==null?void 0:e.type)&&e.type===s.MENU&&r.jsxDEV(t.Item,{label:m("page.systemMenu.path"),name:"path",rules:l==null?void 0:l.path,children:r.jsxDEV(o,{},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/system/menu/[mode]/[id].tsx",lineNumber:169,columnNumber:13},this)},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/system/menu/[mode]/[id].tsx",lineNumber:164,columnNumber:9},this),(e==null?void 0:e.type)&&(e.type===s.MENU||e.type===s.FEATURE)&&r.jsxDEV(t.Item,{label:m("page.systemMenu.code"),name:"code",children:r.jsxDEV(o,{},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/system/menu/[mode]/[id].tsx",lineNumber:178,columnNumber:13},this)},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/system/menu/[mode]/[id].tsx",lineNumber:174,columnNumber:9},this),(e==null?void 0:e.type)&&(e.type===s.DIRECTORY||e.type===s.MENU)&&r.jsxDEV(t.Item,{label:m("page.systemMenu.i18nKey"),name:"i18nKey",children:r.jsxDEV(o,{},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/system/menu/[mode]/[id].tsx",lineNumber:187,columnNumber:13},this)},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/system/menu/[mode]/[id].tsx",lineNumber:183,columnNumber:9},this),r.jsxDEV(t.Item,{label:m("page.systemMenu.sort"),name:"sort",children:r.jsxDEV(S,{min:0,precision:0},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/system/menu/[mode]/[id].tsx",lineNumber:195,columnNumber:11},this)},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/system/menu/[mode]/[id].tsx",lineNumber:191,columnNumber:9},this),(e==null?void 0:e.type)===s.MENU&&r.jsxDEV(t.Item,{label:m("page.systemMenu.isShow"),name:"isShow",valuePropName:"checked",children:r.jsxDEV(V,{},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/system/menu/[mode]/[id].tsx",lineNumber:204,columnNumber:13},this)},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/system/menu/[mode]/[id].tsx",lineNumber:199,columnNumber:9},this),r.jsxDEV(t.Item,{wrapperCol:{offset:12,span:8},children:r.jsxDEV(F,{type:"primary",loading:f},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/system/menu/[mode]/[id].tsx",lineNumber:209,columnNumber:11},this)},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/system/menu/[mode]/[id].tsx",lineNumber:208,columnNumber:9},this)]},void 0,!0,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/system/menu/[mode]/[id].tsx",lineNumber:118,columnNumber:7},this)},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/system/menu/[mode]/[id].tsx",lineNumber:117,columnNumber:5},this)}export{X as default};
