import{u as f,j as e,A as a}from"./index-BpF1OpJE.js";import{g as j,d as y}from"./api-cXZp578A.js";import{B as T}from"./Button-DSSUBtr-.js";import{C}from"./CreateButton-BQmwzpaj.js";import{D as E}from"./DeleteButton-IO9YTVF4.js";import{E as I}from"./EditButton-B8i7R0FJ.js";import{R}from"./RefreshButton-DK40mRYq.js";import"./react-DNsX-D9n.js";import{S as D}from"./SearchContainer-DAc_9fY5.js";import{u as b,a as F,S as P}from"./useTable-DIwiu8V3.js";import{P as r}from"./Permission-SQLIww0o.js";import{A as l}from"./api-DqxKD7_o.js";import{T as n,o as k,F as S,f as B}from"./antd-Bzi-nNZC.js";import"./echarts-C9Czxobr.js";import"./useWindowSize-CaV-WCuS.js";import"./useMutation-DiyeizWV.js";import"./usePageTransfer-fEii5zoy.js";function W(){const{t}=f(),{listContainerProps:p,tableScrollY:m}=b(),{tableProps:d,isLoading:c,isDeleting:x,handleReset:h,handleCreate:o,handleEdit:u,handleDelete:g}=F({key:"api",cacheEnabled:!0,dataStaleTime:1e3*60*10,pagination:!1,listApiFn:j,deleteApiFn:y,scrollY:m,columns:[{title:t("page.systemApi.title"),dataIndex:"title"},{title:t("page.systemApi.type"),dataIndex:"type",render:s=>s===l.DIRECTORY?e.jsx(n,{children:t("page.systemApi.directory")}):e.jsx(n,{color:"blue",children:t("page.systemApi.api")})},{title:t("page.systemApi.method"),dataIndex:"method",render:s=>s?e.jsx(n,{color:"green",children:s}):null},{title:t("page.systemApi.path"),dataIndex:"path"},{title:t("page.systemApi.code"),dataIndex:"code"},{title:t("page.systemApi.sort"),dataIndex:"sort"},{title:t("common.actions"),key:"actions",fixed:"right",width:150,render:(s,i)=>e.jsxs(e.Fragment,{children:[e.jsx(r,{permission:a.CREATE,children:i.type===l.DIRECTORY&&e.jsx(T,{icon:"icon-park-outline:tree-diagram",type:"text",size:"small",onClick:()=>o(i)})}),e.jsx(r,{permission:a.UPDATE,children:e.jsx(I,{type:"text",size:"small",noText:!0,onClick:()=>u(i,i)})}),e.jsx(r,{permission:a.DELETE,children:(!i.children||i.children.length===0)&&e.jsx(E,{type:"text",size:"small",noText:!0,loading:x,onConfirm:()=>g(i.id)})})]})}]}),A=e.jsx(S,{colon:!1,children:e.jsx(D,{actions:e.jsxs(e.Fragment,{children:[e.jsx(R,{loading:c,onClick:h}),e.jsx(B,{type:"vertical"}),e.jsx(r,{permission:a.CREATE,children:e.jsx(C,{onClick:()=>o({id:null})})})]})})});return e.jsx(P,{...p,searchForm:A,children:e.jsx(k,{...d})})}export{W as default};
