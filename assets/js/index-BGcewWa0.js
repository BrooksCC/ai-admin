import{u as U,j as e}from"./index-JkWopOOq.js";import{r as o,u as Y}from"./react-DR1zDSRy.js";import{A as d}from"./admin-service-BKkQARFc.js";import{B as G}from"./BatchDeleteButton-B-vIDYsI.js";import{C as H}from"./CreateButton-CDCgXOSR.js";import{D as Q}from"./DeleteButton-wv65ocfB.js";import{E as W,S as X}from"./SearchContainer-CfRQbxNb.js";import{S as Z,a as h,b as ee,R as re}from"./SearchRow-C5yjr61H.js";import{u as ae,a as me,S as ne}from"./useTable-DmmfH85D.js";import{A as te,F as n,B as c,I as i,S as ie,b as E,c as le,E as v,M as se,d as V,T as s,e as y}from"./antd-Sq0EuMdw.js";import"./echarts-C5AzJBXJ.js";import"./Button-C1yg5AiU.js";import"./useWindowSize-ncjCtajF.js";import"./useMutation-DAuBCnk0.js";import"./usePageTransfer-D2gnab3c.js";function ve(){const{t:a}=U(),j=o.useRef(null),{message:l}=te.useApp(),N=Y(),[I,u]=o.useState(!1),[p]=n.useForm(),[P,S]=o.useState([]),[C,f]=o.useState(!1);o.useEffect(()=>{(async()=>{try{const m=await d.getAllModels();S(m.map(t=>({id:t.id,name:t.name||t.id})))}catch(m){console.error("获取模型列表失败:",m),l.error("获取模型列表失败")}})()},[l]),o.useEffect(()=>{const r=localStorage.getItem("user.token");console.log("当前token状态:",r?"已存在":"不存在",r?`${r.substring(0,15)}...`:"")},[]);async function T({page:r,pageSize:m}){console.log("正在请求参数列表...",{page:r,pageSize:m});try{const t=await d.getAllParameters(r,m);return console.log("参数列表获取成功:",t),{list:t,total:t.length}}catch(t){return console.error("获取参数列表失败:",t),t instanceof Error?l.error(`获取参数列表失败: ${t.message}`):l.error("获取参数列表失败: 未知错误"),{list:[],total:0}}}const{listContainerProps:A,tableScrollY:b}=ae(),x=r=>{if(r==null)return"-";if(typeof r=="string")return r;if(typeof r=="number")return r.toString();if(typeof r=="boolean")return a(r?"是":"否");try{return JSON.stringify(r)}catch{return String(r)}},g=(r,m)=>{if(!r)return"-";const t=m?x(m):"USD";return`${r} ${t}/1K tokens`},F=r=>r?e.jsxDEV(c,{type:"link",size:"small",style:{padding:0,height:"auto",fontSize:"12px"},onClick:()=>N(`/preset/${r}`),children:[r.slice(0,8),"..."]},void 0,!0,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/modelparameter/index.tsx",lineNumber:122,columnNumber:7},this):"-",{form:K,tableProps:M,isLoading:q,selectedIsEmpty:B,selectedCount:R,handleReset:w}=me({key:"model-parameter-list",pagination:!0,listApiFn:T,scrollY:b,selectable:!0,formInitialValues:{parameterSetName:null,modelId:null,notes:null},columns:[{title:a("ID"),dataIndex:"id",width:100,fixed:"left",render:(r,m)=>e.jsxDEV(c,{type:"link",size:"small",style:{padding:0,height:"auto",fontSize:"12px"},onClick:()=>D(m),children:r},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/modelparameter/index.tsx",lineNumber:160,columnNumber:7},this)},{title:a("虚拟模型名"),dataIndex:"parameterSetName",width:120,fixed:"left"},{title:a("模型ID"),dataIndex:"modelId",width:100},{title:a("预设ID"),dataIndex:"presetId",render:r=>F(r),width:120},{title:a("描述"),dataIndex:"description",render:x,width:150},{title:a("备注"),dataIndex:"notes",render:x,width:150},{title:a("输入价格"),dataIndex:"inputPricePerK",render:(r,m)=>g(r,m.currencyCode),width:120},{title:a("输出价格"),dataIndex:"outputPricePerK",render:(r,m)=>g(r,m.currencyCode),width:120},{title:a("操作"),key:"actions",fixed:"right",width:100,render:(r,m)=>e.jsxDEV(e.Fragment,{children:[e.jsxDEV(W,{type:"text",size:"small",noText:!0,onClick:()=>D(m)},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/modelparameter/index.tsx",lineNumber:199,columnNumber:13},this),e.jsxDEV(Q,{type:"text",size:"small",noText:!0,onConfirm:()=>$(m.id)},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/modelparameter/index.tsx",lineNumber:200,columnNumber:13},this)]},void 0,!0,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/modelparameter/index.tsx",lineNumber:198,columnNumber:7},this)}]}),k=()=>{w()};function D(r){N(`/modelparameter/${r.id}/edit`)}async function $(r){try{await d.deleteModelParameter(r),l.success(a("删除成功")),k()}catch(m){console.error("删除参数集失败:",m),l.error(a("删除失败"))}}const z=e.jsxDEV(n,{ref:j,form:K,colon:!1,autoComplete:"off",onFinish:()=>{},children:e.jsxDEV(X,{actions:e.jsxDEV(e.Fragment,{children:[e.jsxDEV(ie,{children:[e.jsxDEV(ee,{loading:q},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/modelparameter/index.tsx",lineNumber:243,columnNumber:15},this),e.jsxDEV(re,{onClick:w},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/modelparameter/index.tsx",lineNumber:244,columnNumber:15},this)]},void 0,!0,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/modelparameter/index.tsx",lineNumber:242,columnNumber:13},this),e.jsxDEV(E,{type:"vertical"},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/modelparameter/index.tsx",lineNumber:246,columnNumber:13},this),e.jsxDEV(G,{disabled:B,count:R,onConfirm:()=>{}},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/modelparameter/index.tsx",lineNumber:247,columnNumber:13},this),e.jsxDEV(E,{type:"vertical"},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/modelparameter/index.tsx",lineNumber:252,columnNumber:13},this),e.jsxDEV(H,{onClick:()=>J()},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/modelparameter/index.tsx",lineNumber:253,columnNumber:13},this)]},void 0,!0,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/modelparameter/index.tsx",lineNumber:241,columnNumber:7},this),children:e.jsxDEV(Z,{children:[e.jsxDEV(h,{name:"parameterSetName",label:a("虚拟模型名"),children:e.jsxDEV(i,{},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/modelparameter/index.tsx",lineNumber:259,columnNumber:13},this)},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/modelparameter/index.tsx",lineNumber:258,columnNumber:11},this),e.jsxDEV(h,{name:"modelId",label:a("模型ID"),children:e.jsxDEV(i,{},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/modelparameter/index.tsx",lineNumber:262,columnNumber:13},this)},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/modelparameter/index.tsx",lineNumber:261,columnNumber:11},this),e.jsxDEV(h,{name:"notes",label:a("备注"),children:e.jsxDEV(i,{},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/modelparameter/index.tsx",lineNumber:265,columnNumber:13},this)},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/modelparameter/index.tsx",lineNumber:264,columnNumber:11},this)]},void 0,!0,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/modelparameter/index.tsx",lineNumber:257,columnNumber:9},this)},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/modelparameter/index.tsx",lineNumber:239,columnNumber:7},this)},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/modelparameter/index.tsx",lineNumber:232,columnNumber:3},this);function J(){p.resetFields(),u(!0)}async function L(){try{const r=await p.validateFields();f(!0);const m=r.stopSequences?r.stopSequences.split(`
`).filter(_=>_.trim()):[];let t=null;if(r.extraParams&&r.extraParams.trim())try{t=JSON.parse(r.extraParams)}catch{l.error(a("额外参数JSON格式错误"));return}const O={parameterSetName:r.parameterSetName,modelId:r.modelId,description:r.description||null,temperature:r.temperature,maxTokens:r.maxTokens,maxInputTokens:r.maxInputTokens,topP:r.topP,topK:r.topK,stopSequences:m,frequencyPenalty:r.frequencyPenalty,presencePenalty:r.presencePenalty,isDefault:r.isDefault,notes:r.notes||null,extraParams:t,providerId:r.providerId||null,currencyCode:r.currencyCode||null,inputPricePerK:r.inputPricePerK||null,outputPricePerK:r.outputPricePerK||null,isPricingActive:r.isPricingActive||!1,presetId:r.presetId||null};await d.createModelParameter(O),l.success(a("创建成功")),u(!1),k()}catch(r){console.error("创建参数集失败:",r),l.error(a("创建失败"))}finally{f(!1)}}return e.jsxDEV(e.Fragment,{children:[e.jsxDEV(ne,{...A,searchForm:z,children:e.jsxDEV(le,{...M,scroll:{x:1200,y:b},locale:{emptyText:e.jsxDEV(v,{description:a("暂无参数数据"),image:v.PRESENTED_IMAGE_SIMPLE},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/modelparameter/index.tsx",lineNumber:342,columnNumber:24},this)}},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/modelparameter/index.tsx",lineNumber:338,columnNumber:9},this)},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/modelparameter/index.tsx",lineNumber:337,columnNumber:7},this),e.jsxDEV(se,{title:a("创建参数集"),open:I,onCancel:()=>u(!1),width:800,footer:[e.jsxDEV(c,{onClick:()=>u(!1),children:a("取消")},"cancel",!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/modelparameter/index.tsx",lineNumber:354,columnNumber:9},this),e.jsxDEV(c,{type:"primary",loading:C,onClick:L,children:a("确定")},"submit",!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/modelparameter/index.tsx",lineNumber:357,columnNumber:9},this)],children:e.jsxDEV(n,{form:p,layout:"vertical",autoComplete:"off",children:[e.jsxDEV(n.Item,{name:"parameterSetName",label:a("虚拟模型名"),rules:[{required:!0,message:a("请输入参数集名称")}],children:e.jsxDEV(i,{placeholder:a("请输入参数集名称")},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/modelparameter/index.tsx",lineNumber:377,columnNumber:13},this)},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/modelparameter/index.tsx",lineNumber:372,columnNumber:11},this),e.jsxDEV(n.Item,{name:"modelId",label:a("模型"),rules:[{required:!0,message:a("请选择模型")}],children:e.jsxDEV(V,{placeholder:a("请选择模型"),children:P.map(r=>e.jsxDEV(V.Option,{value:r.id,children:r.name},r.id,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/modelparameter/index.tsx",lineNumber:387,columnNumber:15},this))},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/modelparameter/index.tsx",lineNumber:385,columnNumber:13},this)},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/modelparameter/index.tsx",lineNumber:380,columnNumber:11},this),e.jsxDEV(n.Item,{name:"description",label:a("参数集描述"),children:e.jsxDEV(i.TextArea,{rows:3,placeholder:a("请输入参数集描述")},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/modelparameter/index.tsx",lineNumber:398,columnNumber:13},this)},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/modelparameter/index.tsx",lineNumber:394,columnNumber:11},this),e.jsxDEV(n.Item,{name:"notes",label:a("备注"),children:e.jsxDEV(i,{placeholder:a("请输入备注")},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/modelparameter/index.tsx",lineNumber:405,columnNumber:13},this)},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/modelparameter/index.tsx",lineNumber:401,columnNumber:11},this),e.jsxDEV("div",{style:{display:"flex",gap:"16px"},children:[e.jsxDEV(n.Item,{name:"temperature",label:a("温度参数"),style:{flex:1},children:e.jsxDEV(s,{min:0,max:2,step:.1,style:{width:"100%"},placeholder:"0.7"},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/modelparameter/index.tsx",lineNumber:414,columnNumber:15},this)},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/modelparameter/index.tsx",lineNumber:409,columnNumber:13},this),e.jsxDEV(n.Item,{name:"maxTokens",label:a("最大Token数"),style:{flex:1},children:e.jsxDEV(s,{min:1,style:{width:"100%"},placeholder:"4096"},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/modelparameter/index.tsx",lineNumber:422,columnNumber:15},this)},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/modelparameter/index.tsx",lineNumber:417,columnNumber:13},this)]},void 0,!0,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/modelparameter/index.tsx",lineNumber:408,columnNumber:11},this),e.jsxDEV("div",{style:{display:"flex",gap:"16px"},children:[e.jsxDEV(n.Item,{name:"maxInputTokens",label:a("最大输入Token数"),style:{flex:1},children:e.jsxDEV(s,{min:1,style:{width:"100%"},placeholder:"8192"},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/modelparameter/index.tsx",lineNumber:432,columnNumber:15},this)},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/modelparameter/index.tsx",lineNumber:427,columnNumber:13},this),e.jsxDEV(n.Item,{name:"topP",label:a("顶部概率采样"),style:{flex:1},children:e.jsxDEV(s,{min:0,max:1,step:.1,style:{width:"100%"},placeholder:"1.0"},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/modelparameter/index.tsx",lineNumber:440,columnNumber:15},this)},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/modelparameter/index.tsx",lineNumber:435,columnNumber:13},this)]},void 0,!0,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/modelparameter/index.tsx",lineNumber:426,columnNumber:11},this),e.jsxDEV("div",{style:{display:"flex",gap:"16px"},children:[e.jsxDEV(n.Item,{name:"topK",label:a("顶部K采样"),style:{flex:1},children:e.jsxDEV(s,{min:0,style:{width:"100%"},placeholder:"40"},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/modelparameter/index.tsx",lineNumber:450,columnNumber:15},this)},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/modelparameter/index.tsx",lineNumber:445,columnNumber:13},this),e.jsxDEV(n.Item,{name:"frequencyPenalty",label:a("频率惩罚"),style:{flex:1},children:e.jsxDEV(s,{min:0,step:.1,style:{width:"100%"},placeholder:"0.0"},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/modelparameter/index.tsx",lineNumber:458,columnNumber:15},this)},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/modelparameter/index.tsx",lineNumber:453,columnNumber:13},this)]},void 0,!0,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/modelparameter/index.tsx",lineNumber:444,columnNumber:11},this),e.jsxDEV(n.Item,{name:"presencePenalty",label:a("存在惩罚"),children:e.jsxDEV(s,{min:0,step:.1,style:{width:"100%"},placeholder:"0.0"},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/modelparameter/index.tsx",lineNumber:466,columnNumber:13},this)},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/modelparameter/index.tsx",lineNumber:462,columnNumber:11},this),e.jsxDEV(n.Item,{name:"stopSequences",label:a("停止序列"),help:a("每行一个停止序列"),children:e.jsxDEV(i.TextArea,{rows:3,placeholder:a("请输入停止序列，每行一个")},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/modelparameter/index.tsx",lineNumber:474,columnNumber:13},this)},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/modelparameter/index.tsx",lineNumber:469,columnNumber:11},this),e.jsxDEV(n.Item,{name:"extraParams",label:a("额外参数"),help:a("请输入有效的JSON格式"),children:e.jsxDEV(i.TextArea,{rows:4,placeholder:'{"customParam": "value"}'},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/modelparameter/index.tsx",lineNumber:482,columnNumber:13},this)},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/modelparameter/index.tsx",lineNumber:477,columnNumber:11},this),e.jsxDEV("div",{style:{display:"flex",gap:"16px"},children:[e.jsxDEV(n.Item,{name:"providerId",label:a("供应商ID"),style:{flex:1},children:e.jsxDEV(i,{placeholder:a("请输入供应商ID")},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/modelparameter/index.tsx",lineNumber:491,columnNumber:15},this)},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/modelparameter/index.tsx",lineNumber:486,columnNumber:13},this),e.jsxDEV(n.Item,{name:"currencyCode",label:a("货币代码"),style:{flex:1},children:e.jsxDEV(i,{placeholder:"USD"},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/modelparameter/index.tsx",lineNumber:499,columnNumber:15},this)},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/modelparameter/index.tsx",lineNumber:494,columnNumber:13},this)]},void 0,!0,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/modelparameter/index.tsx",lineNumber:485,columnNumber:11},this),e.jsxDEV("div",{style:{display:"flex",gap:"16px"},children:[e.jsxDEV(n.Item,{name:"inputPricePerK",label:a("输入价格(/1K tokens)"),style:{flex:1},children:e.jsxDEV(i,{placeholder:"0.001"},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/modelparameter/index.tsx",lineNumber:509,columnNumber:15},this)},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/modelparameter/index.tsx",lineNumber:504,columnNumber:13},this),e.jsxDEV(n.Item,{name:"outputPricePerK",label:a("输出价格(/1K tokens)"),style:{flex:1},children:e.jsxDEV(i,{placeholder:"0.002"},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/modelparameter/index.tsx",lineNumber:517,columnNumber:15},this)},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/modelparameter/index.tsx",lineNumber:512,columnNumber:13},this)]},void 0,!0,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/modelparameter/index.tsx",lineNumber:503,columnNumber:11},this),e.jsxDEV("div",{style:{display:"flex",gap:"16px"},children:[e.jsxDEV(n.Item,{name:"isDefault",label:a("是否默认"),valuePropName:"checked",initialValue:!1,style:{flex:1},children:e.jsxDEV(y,{},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/modelparameter/index.tsx",lineNumber:529,columnNumber:15},this)},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/modelparameter/index.tsx",lineNumber:522,columnNumber:13},this),e.jsxDEV(n.Item,{name:"isPricingActive",label:a("价格是否激活"),valuePropName:"checked",initialValue:!1,style:{flex:1},children:e.jsxDEV(y,{},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/modelparameter/index.tsx",lineNumber:539,columnNumber:15},this)},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/modelparameter/index.tsx",lineNumber:532,columnNumber:13},this)]},void 0,!0,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/modelparameter/index.tsx",lineNumber:521,columnNumber:11},this)]},void 0,!0,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/modelparameter/index.tsx",lineNumber:367,columnNumber:9},this)},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/modelparameter/index.tsx",lineNumber:348,columnNumber:7},this)]},void 0,!0,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/modelparameter/index.tsx",lineNumber:336,columnNumber:5},this)}export{ve as default};
