import{u as j,j as e,A as a}from"./index-D55vL5wO.js";import{g as f,d as y}from"./api-wyC-BQVS.js";import{B as T}from"./Button-liRRJ1S-.js";import{C}from"./CreateButton-Bj9Clfnt.js";import{E,D as I}from"./EditButton-BAmy2aRC.js";import{R}from"./RefreshButton-Bl5dqSsT.js";import"./react-Dz_Dwpfc.js";import{S as D}from"./SearchContainer-ZPglRyAr.js";import{u as b,a as k,S as F}from"./useTable-Dau28hZJ.js";import{P as n}from"./Permission-QZE47TAA.js";import{A as l}from"./api-DqxKD7_o.js";import{w as r,q as P,F as S,k as B}from"./antd-CXRY_8Ve.js";import"./echarts-C9Czxobr.js";import"./useWindowSize-DSNN33pu.js";import"./useMutation-D3lCQUnz.js";import"./usePageTransfer-BQQRFyIY.js";function V(){const{t}=j(),{listContainerProps:p,tableScrollY:m}=b(),{tableProps:d,isLoading:c,isDeleting:x,handleReset:h,handleCreate:o,handleEdit:u,handleDelete:g}=k({key:"api",cacheEnabled:!0,dataStaleTime:1e3*60*10,pagination:!1,listApiFn:f,deleteApiFn:y,scrollY:m,columns:[{title:t("page.systemApi.title"),dataIndex:"title"},{title:t("page.systemApi.type"),dataIndex:"type",render:s=>s===l.DIRECTORY?e.jsx(r,{children:t("page.systemApi.directory")}):e.jsx(r,{color:"blue",children:t("page.systemApi.api")})},{title:t("page.systemApi.method"),dataIndex:"method",render:s=>s?e.jsx(r,{color:"green",children:s}):null},{title:t("page.systemApi.path"),dataIndex:"path"},{title:t("page.systemApi.code"),dataIndex:"code"},{title:t("page.systemApi.sort"),dataIndex:"sort"},{title:t("common.actions"),key:"actions",fixed:"right",width:150,render:(s,i)=>e.jsxs(e.Fragment,{children:[e.jsx(n,{permission:a.CREATE,children:i.type===l.DIRECTORY&&e.jsx(T,{icon:"icon-park-outline:tree-diagram",type:"text",size:"small",onClick:()=>o(i)})}),e.jsx(n,{permission:a.UPDATE,children:e.jsx(E,{type:"text",size:"small",noText:!0,onClick:()=>u(i,i)})}),e.jsx(n,{permission:a.DELETE,children:(!i.children||i.children.length===0)&&e.jsx(I,{type:"text",size:"small",noText:!0,loading:x,onConfirm:()=>g(i.id)})})]})}]}),A=e.jsx(S,{colon:!1,children:e.jsx(D,{actions:e.jsxs(e.Fragment,{children:[e.jsx(R,{loading:c,onClick:h}),e.jsx(B,{type:"vertical"}),e.jsx(n,{permission:a.CREATE,children:e.jsx(C,{onClick:()=>o({id:null})})})]})})});return e.jsx(F,{...p,searchForm:A,children:e.jsx(P,{...d})})}export{V as default};
