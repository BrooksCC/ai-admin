import{u as $,j as e}from"./index-B7GDeRPa.js";import{r as t}from"./react-DR1zDSRy.js";import{A as u}from"./admin-service-BGN1WvqS.js";import{B as K}from"./BatchDeleteButton-CD8BGSNZ.js";import{C as J}from"./CreateButton-BQDfTnOk.js";import{D as Q}from"./DeleteButton-DIObBYPk.js";import{E as W,S as X}from"./SearchContainer-DU4NXpSE.js";import{S as Z,a as b,b as ee,R as re}from"./SearchRow-DysSHE53.js";import{u as ie,a as ae,S as ne}from"./useTable-DR46t1Tf.js";import{A as oe,F as o,B as d,f as g,I as s,d as a,S as me,b as j,c as le,E as y,M as I}from"./antd-DpIe9wCj.js";import"./echarts-C5AzJBXJ.js";import"./Button-B2usg2r0.js";import"./useWindowSize-ncjCtajF.js";import"./useMutation-cOeNL2E2.js";import"./usePageTransfer-QecPH4d5.js";function Ee(){const{t:r}=$(),C=t.useRef(null),{modal:A,message:m}=oe.useApp(),[P,c]=t.useState(!1),[S,p]=t.useState(!1),[h,T]=t.useState(null),[N]=o.useForm(),[f]=o.useForm(),[k,x]=t.useState(!1);t.useEffect(()=>{const i=localStorage.getItem("user.token");console.log("当前token状态:",i?"已存在":"不存在",i?`${i.substring(0,15)}...`:"")},[]);async function O({page:i,pageSize:n}){console.log("正在请求供应商列表...",{page:i,pageSize:n});try{const l=await u.getAllProviders();return console.log("供应商列表获取成功:",l),{list:l,total:l.length}}catch(l){return console.error("获取供应商列表失败:",l),l instanceof Error?m.error(`获取供应商列表失败: ${l.message}`):m.error("获取供应商列表失败: 未知错误"),{list:[],total:0}}}const{listContainerProps:F,tableScrollY:w}=ie(),{form:U,tableProps:R,isLoading:B,selectedIsEmpty:L,selectedCount:M,handleReset:E}=ae({key:"provider-list",pagination:!0,listApiFn:O,scrollY:w,selectable:!0,formInitialValues:{name:null,providerType:null,status:null},columns:[{title:r("供应商ID"),dataIndex:"id",render:(i,n)=>e.jsxDEV(d,{type:"link",size:"small",style:{padding:0,height:"auto",fontSize:"12px"},onClick:()=>D(n),children:i},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/modelprovider/index.tsx",lineNumber:98,columnNumber:7},this)},{title:r("供应商名称"),dataIndex:"name"},{title:r("描述"),dataIndex:"description",ellipsis:!0},{title:r("供应商类型"),dataIndex:"providerType",render:i=>e.jsxDEV(g,{color:"processing",children:i},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/modelprovider/index.tsx",lineNumber:113,columnNumber:26},this)},{title:r("认证类型"),dataIndex:"authType",render:i=>e.jsxDEV(g,{color:"blue",children:i},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/modelprovider/index.tsx",lineNumber:118,columnNumber:26},this)},{title:r("API基础URL"),dataIndex:"apiBaseUrl",ellipsis:!0},{title:r("状态"),dataIndex:"status",render:i=>e.jsxDEV(g,{color:i==="ACTIVE"?"success":"warning",children:i},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/modelprovider/index.tsx",lineNumber:124,columnNumber:26},this)},{title:r("创建时间"),dataIndex:"createdAt",render:i=>new Date(i).toLocaleString()},{title:r("操作"),key:"actions",fixed:"right",width:120,render:(i,n)=>e.jsxDEV(e.Fragment,{children:[e.jsxDEV(W,{type:"text",size:"small",noText:!0,onClick:()=>D(n)},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/modelprovider/index.tsx",lineNumber:138,columnNumber:13},this),e.jsxDEV(Q,{type:"text",size:"small",noText:!0,onConfirm:()=>q(n.id)},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/modelprovider/index.tsx",lineNumber:139,columnNumber:13},this)]},void 0,!0,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/modelprovider/index.tsx",lineNumber:137,columnNumber:7},this)}]}),v=()=>{E()};function D(i){T(i),f.setFieldsValue({name:i.name,description:i.description,websiteUrl:i.websiteUrl,apiDocUrl:i.apiDocUrl,apiBaseUrl:i.apiBaseUrl,authType:i.authType,providerType:i.providerType}),p(!0)}async function _(){if(h)try{const i=await f.validateFields();x(!0),await u.updateProvider(h.id,i),m.success(r("更新成功")),p(!1),v()}catch(i){console.error("更新供应商失败:",i),m.error(r("更新失败"))}finally{x(!1)}}async function q(i){try{await u.deleteProvider(i),m.success(r("删除成功")),v()}catch(n){console.error("删除供应商失败:",n),m.error(r("删除失败"))}}async function z(i){try{const n=await u.checkProviderHealth(i);A.success({title:r("健康状态检查"),content:e.jsxDEV("div",{children:[e.jsxDEV("p",{children:[r("状态"),":"," ",n.message?r("健康"):r("不健康")]},void 0,!0,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/modelprovider/index.tsx",lineNumber:209,columnNumber:13},this),e.jsxDEV("p",{children:[r("消息"),":"," ",n.message||r("无详细信息")]},void 0,!0,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/modelprovider/index.tsx",lineNumber:215,columnNumber:13},this)]},void 0,!0,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/modelprovider/index.tsx",lineNumber:208,columnNumber:9},this)})}catch(n){console.error("检查供应商健康状态失败:",n),m.error(r("健康状态检查失败"))}}const G=e.jsxDEV(o,{ref:C,form:U,colon:!1,autoComplete:"off",onFinish:()=>{},children:e.jsxDEV(X,{actions:e.jsxDEV(e.Fragment,{children:[e.jsxDEV(me,{children:[e.jsxDEV(ee,{loading:B},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/modelprovider/index.tsx",lineNumber:243,columnNumber:15},this),e.jsxDEV(re,{onClick:E},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/modelprovider/index.tsx",lineNumber:244,columnNumber:15},this)]},void 0,!0,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/modelprovider/index.tsx",lineNumber:242,columnNumber:13},this),e.jsxDEV(j,{type:"vertical"},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/modelprovider/index.tsx",lineNumber:246,columnNumber:13},this),e.jsxDEV(K,{disabled:L,count:M,onConfirm:()=>{}},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/modelprovider/index.tsx",lineNumber:247,columnNumber:13},this),e.jsxDEV(j,{type:"vertical"},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/modelprovider/index.tsx",lineNumber:252,columnNumber:13},this),e.jsxDEV(J,{onClick:()=>H()},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/modelprovider/index.tsx",lineNumber:253,columnNumber:13},this)]},void 0,!0,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/modelprovider/index.tsx",lineNumber:241,columnNumber:7},this),children:e.jsxDEV(Z,{children:[e.jsxDEV(b,{name:"name",label:r("供应商名称"),children:e.jsxDEV(s,{},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/modelprovider/index.tsx",lineNumber:259,columnNumber:13},this)},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/modelprovider/index.tsx",lineNumber:258,columnNumber:11},this),e.jsxDEV(b,{name:"providerType",label:r("供应商类型"),children:e.jsxDEV(a,{allowClear:!0,children:[e.jsxDEV(a.Option,{value:"openai",children:r("OpenAI")},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/modelprovider/index.tsx",lineNumber:263,columnNumber:15},this),e.jsxDEV(a.Option,{value:"anthropic",children:r("Anthropic")},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/modelprovider/index.tsx",lineNumber:264,columnNumber:15},this),e.jsxDEV(a.Option,{value:"cohere",children:r("Cohere")},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/modelprovider/index.tsx",lineNumber:265,columnNumber:15},this),e.jsxDEV(a.Option,{value:"mistralai",children:r("Mistral")},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/modelprovider/index.tsx",lineNumber:266,columnNumber:15},this),e.jsxDEV(a.Option,{value:"deepseek",children:r("Deepseek")},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/modelprovider/index.tsx",lineNumber:267,columnNumber:15},this),e.jsxDEV(a.Option,{value:"google",children:r("Google")},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/modelprovider/index.tsx",lineNumber:268,columnNumber:15},this),e.jsxDEV(a.Option,{value:"custom",children:r("自定义")},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/modelprovider/index.tsx",lineNumber:269,columnNumber:15},this)]},void 0,!0,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/modelprovider/index.tsx",lineNumber:262,columnNumber:13},this)},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/modelprovider/index.tsx",lineNumber:261,columnNumber:11},this),e.jsxDEV(b,{name:"status",label:r("状态"),children:e.jsxDEV(a,{allowClear:!0,children:[e.jsxDEV(a.Option,{value:"ACTIVE",children:r("活跃")},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/modelprovider/index.tsx",lineNumber:274,columnNumber:15},this),e.jsxDEV(a.Option,{value:"INACTIVE",children:r("不活跃")},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/modelprovider/index.tsx",lineNumber:275,columnNumber:15},this)]},void 0,!0,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/modelprovider/index.tsx",lineNumber:273,columnNumber:13},this)},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/modelprovider/index.tsx",lineNumber:272,columnNumber:11},this)]},void 0,!0,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/modelprovider/index.tsx",lineNumber:257,columnNumber:9},this)},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/modelprovider/index.tsx",lineNumber:239,columnNumber:7},this)},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/modelprovider/index.tsx",lineNumber:232,columnNumber:3},this);function H(){N.resetFields(),c(!0)}async function Y(){try{const i=await N.validateFields();x(!0),await u.createProvider(i),m.success(r("创建成功")),c(!1),v()}catch(i){console.error("创建供应商失败:",i),m.error(r("创建失败"))}finally{x(!1)}}const V=(i,n=!1)=>e.jsxDEV(o,{form:i,layout:"vertical",autoComplete:"off",children:[e.jsxDEV(o.Item,{name:"name",label:r("供应商名称"),rules:[{required:!0,message:r("请输入供应商名称")}],children:e.jsxDEV(s,{placeholder:r("请输入供应商名称")},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/modelprovider/index.tsx",lineNumber:319,columnNumber:9},this)},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/modelprovider/index.tsx",lineNumber:314,columnNumber:7},this),e.jsxDEV(o.Item,{name:"description",label:r("供应商描述"),children:e.jsxDEV(s.TextArea,{placeholder:r("请输入供应商描述")},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/modelprovider/index.tsx",lineNumber:326,columnNumber:9},this)},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/modelprovider/index.tsx",lineNumber:322,columnNumber:7},this),e.jsxDEV(o.Item,{name:"websiteUrl",label:r("官网URL"),children:e.jsxDEV(s,{placeholder:r("请输入官网URL")},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/modelprovider/index.tsx",lineNumber:333,columnNumber:9},this)},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/modelprovider/index.tsx",lineNumber:329,columnNumber:7},this),e.jsxDEV(o.Item,{name:"apiDocUrl",label:r("API文档URL"),children:e.jsxDEV(s,{placeholder:r("请输入API文档URL")},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/modelprovider/index.tsx",lineNumber:340,columnNumber:9},this)},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/modelprovider/index.tsx",lineNumber:336,columnNumber:7},this),e.jsxDEV(o.Item,{name:"apiKey",label:r("API密钥"),rules:[{required:!n,message:r("请输入API密钥")}],children:e.jsxDEV(s.Password,{placeholder:r(n?"留空表示不修改":"请输入API密钥")},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/modelprovider/index.tsx",lineNumber:348,columnNumber:9},this)},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/modelprovider/index.tsx",lineNumber:343,columnNumber:7},this),e.jsxDEV(o.Item,{name:"apiBaseUrl",label:r("API基础URL"),children:e.jsxDEV(s,{placeholder:r("请输入API基础URL")},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/modelprovider/index.tsx",lineNumber:355,columnNumber:9},this)},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/modelprovider/index.tsx",lineNumber:351,columnNumber:7},this),e.jsxDEV(o.Item,{name:"authType",label:r("认证类型"),rules:[{required:!0,message:r("请选择认证类型")}],initialValue:"api_key",children:e.jsxDEV(a,{children:[e.jsxDEV(a.Option,{value:"api_key",children:r("API密钥")},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/modelprovider/index.tsx",lineNumber:365,columnNumber:11},this),e.jsxDEV(a.Option,{value:"oauth",children:r("OAuth")},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/modelprovider/index.tsx",lineNumber:366,columnNumber:11},this),e.jsxDEV(a.Option,{value:"custom",children:r("自定义")},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/modelprovider/index.tsx",lineNumber:367,columnNumber:11},this)]},void 0,!0,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/modelprovider/index.tsx",lineNumber:364,columnNumber:9},this)},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/modelprovider/index.tsx",lineNumber:358,columnNumber:7},this),e.jsxDEV(o.Item,{name:"providerType",label:r("供应商类型"),rules:[{required:!0,message:r("请选择供应商类型")}],initialValue:"custom",children:e.jsxDEV(a,{children:[e.jsxDEV(a.Option,{value:"openai",children:r("OpenAI")},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/modelprovider/index.tsx",lineNumber:378,columnNumber:11},this),e.jsxDEV(a.Option,{value:"anthropic",children:r("Anthropic")},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/modelprovider/index.tsx",lineNumber:379,columnNumber:11},this),e.jsxDEV(a.Option,{value:"cohere",children:r("Cohere")},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/modelprovider/index.tsx",lineNumber:380,columnNumber:11},this),e.jsxDEV(a.Option,{value:"mistralai",children:r("Mistral")},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/modelprovider/index.tsx",lineNumber:381,columnNumber:11},this),e.jsxDEV(a.Option,{value:"deepseek",children:r("Deepseek")},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/modelprovider/index.tsx",lineNumber:382,columnNumber:11},this),e.jsxDEV(a.Option,{value:"google",children:r("Google")},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/modelprovider/index.tsx",lineNumber:383,columnNumber:11},this),e.jsxDEV(a.Option,{value:"custom",children:r("自定义")},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/modelprovider/index.tsx",lineNumber:384,columnNumber:11},this)]},void 0,!0,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/modelprovider/index.tsx",lineNumber:377,columnNumber:9},this)},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/modelprovider/index.tsx",lineNumber:371,columnNumber:7},this)]},void 0,!0,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/modelprovider/index.tsx",lineNumber:309,columnNumber:3},this);return e.jsxDEV(e.Fragment,{children:[e.jsxDEV(ne,{...F,searchForm:G,children:e.jsxDEV(le,{...R,locale:{emptyText:e.jsxDEV(y,{description:r("暂无供应商数据"),image:y.PRESENTED_IMAGE_SIMPLE},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/modelprovider/index.tsx",lineNumber:396,columnNumber:24},this)},scroll:{x:1500,y:w}},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/modelprovider/index.tsx",lineNumber:393,columnNumber:9},this)},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/modelprovider/index.tsx",lineNumber:392,columnNumber:7},this),e.jsxDEV(I,{title:r("创建供应商"),open:P,onCancel:()=>c(!1),footer:[e.jsxDEV(d,{onClick:()=>c(!1),children:r("取消")},"cancel",!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/modelprovider/index.tsx",lineNumber:408,columnNumber:9},this),e.jsxDEV(d,{type:"primary",loading:k,onClick:Y,children:r("确定")},"submit",!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/modelprovider/index.tsx",lineNumber:411,columnNumber:9},this)],width:600,children:V(N)},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/modelprovider/index.tsx",lineNumber:403,columnNumber:7},this),e.jsxDEV(I,{title:r("编辑供应商"),open:S,onCancel:()=>p(!1),footer:[e.jsxDEV(d,{onClick:()=>p(!1),children:r("取消")},"cancel",!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/modelprovider/index.tsx",lineNumber:431,columnNumber:9},this),e.jsxDEV(d,{type:"primary",loading:k,onClick:_,children:r("确定")},"submit",!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/modelprovider/index.tsx",lineNumber:434,columnNumber:9},this),e.jsxDEV(d,{type:"default",onClick:()=>h&&z(h.id),children:r("检查健康状态")},"health",!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/modelprovider/index.tsx",lineNumber:442,columnNumber:9},this)],width:600,children:V(f,!0)},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/modelprovider/index.tsx",lineNumber:426,columnNumber:7},this)]},void 0,!0,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/modelprovider/index.tsx",lineNumber:391,columnNumber:5},this)}export{Ee as default};
