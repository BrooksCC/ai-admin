import{D as ar,S as f}from"./sdk-service-JJkpzJJW.js";var cr;let nr;function hr(t,r,e,a,s,P){var u,i,W,q,T,z,_,ir=Symbol.metadata||Symbol.for("Symbol.metadata"),G=Object.defineProperty,J=Object.create,L=[J(null),J(null)],Q=r.length;function A(o,y,d){return function(c,n){y&&(n=c,c=t);for(var m=0;m<o.length;m++)n=o[m].apply(c,d?[n]:[]);return d?n:c}}function C(o,y,d,c){if(typeof o!="function"&&(c||o!==void 0))throw new TypeError(y+" must "+(d||"be")+" a function"+(c?"":" or undefined"));return o}function V(o,y,d,c,n,m,S,g,v,w,Y){function K(l){if(!Y(l))throw new TypeError("Attempted to access private element on non-instance")}var k=[].concat(y[0]),Z=y[3],x=!S,j=n===1,$=n===3,H=n===4,I=n===2;function O(l,D,er){return function(U,tr){return D&&(tr=U,U=o),er&&er(U),h[l].call(U,tr)}}if(!x){var h={},B=[],b=$?"get":H||j?"set":"value";if(v?(w||j?h={get:or(function(){return Z(this)},c,"get"),set:function(l){y[4](this,l)}}:h[b]=Z,w||or(h[b],c,I?"":b)):w||(h=Object.getOwnPropertyDescriptor(o,c)),!w&&!v){if((i=L[+g][c])&&(i^n)!=7)throw Error("Decorating two elements with the same name ("+h[b].name+") is not supported yet");L[+g][c]=n<3?1:n}}for(var p=o,R=k.length-1;R>=0;R-=d?2:1){var N=C(k[R],"A decorator","be",!0),rr=d?k[R-1]:void 0,M={},F={kind:["field","accessor","method","getter","setter","class"][n],name:c,metadata:u,addInitializer:(function(l,D){if(l.v)throw new TypeError("attempted to call addInitializer after decoration was finished");C(D,"An initializer","be",!0),m.push(D)}).bind(null,M)};if(x)i=N.call(rr,p,F),M.v=1,C(i,"class decorators","return")&&(p=i);else if(F.static=g,F.private=v,i=F.access={has:v?Y.bind():function(l){return c in l}},H||(i.get=v?I?function(l){return K(l),h.value}:O("get",0,K):function(l){return l[c]}),I||$||(i.set=v?O("set",0,K):function(l,D){l[c]=D}),p=N.call(rr,j?{get:h.get,set:h.set}:h[b],F),M.v=1,j){if(typeof p=="object"&&p)(i=C(p.get,"accessor.get"))&&(h.get=i),(i=C(p.set,"accessor.set"))&&(h.set=i),(i=C(p.init,"accessor.init"))&&B.unshift(i);else if(p!==void 0)throw new TypeError("accessor decorators must return an object with get, set, or init properties or undefined")}else C(p,(w?"field":"method")+" decorators","return")&&(w?B.unshift(p):h[b]=p)}return n<2&&S.push(A(B,g,1),A(m,g,0)),w||x||(v?j?S.splice(-1,0,O("get",g),O("set",g)):S.push(I?h[b]:C.call.bind(h[b])):G(o,c,h)),p}function X(o){return G(o,ir,{configurable:!0,enumerable:!0,value:u})}return u=J(u??null),T=[],z=function(o){o&&T.push(A(o))},_=function(o,y){for(var d=0;d<e.length;d++){var c=e[d],n=c[1],m=7&n;if((8&n)==o&&!m==y){var S=c[2],g=!!c[3],v=16&n;V(o?t:t.prototype,c,v,g?"#"+S:ur(S),m,m<2?[]:o?q=q||[]:W=W||[],T,!!o,g,y,o&&g?function(w){return pr(w)===t}:s)}}},_(8,0),_(0,0),_(8,1),_(0,1),z(W),z(q),i=T,Q||X(t),{e:i,get c(){var o=[];return Q&&[X(t=V(t,[r],a,t.name,5,o)),A(o,1)]}}}function ur(t){var r=lr(t,"string");return typeof r=="symbol"?r:r+""}function lr(t,r){if(typeof t!="object"||!t)return t;var e=t[Symbol.toPrimitive];if(e!==void 0){var a=e.call(t,r);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}function or(t,r,e){typeof r=="symbol"&&(r=(r=r.description)?"["+r+"]":"");try{Object.defineProperty(t,"name",{configurable:!0,value:e?e+" "+r:r})}catch{}return t}function pr(t){if(Object(t)!==t)throw TypeError("right-hand side of 'in' should be an object, got "+(t!==null?typeof t:"null"));return t}let sr;class fr{async create(r){try{return(await f.characters.create({createCharacterRequestDto:r})).data}catch(e){throw console.error("Failed to create character:",e),e}}async favoriteCharacter(r){try{await f.characters.favoriteCharacter({id:r})}catch(e){throw console.error("Failed to favorite character:",e),e}}async findUserFavorites(r,e,a){try{return(await f.characters.findUserFavorites({userId:r,page:e,limit:a})).data}catch(s){throw console.error("Failed to find user favorites:",s),s}}async getAllCategoriesWithPopularTags(){try{return(await f.characters.getAllCategoriesWithPopularTags()).data}catch(r){throw console.error("Failed to get all categories with popular tags:",r),r}}async getCharacterDetail(r){try{return(await f.characters.getCharacterDetail({id:r})).data}catch(e){throw console.error("Failed to get character detail:",e),e}}async getRatings(r,e,a){try{return(await f.characters.getRatings({id:r,page:e,limit:a})).data}catch(s){throw console.error("Failed to get ratings:",s),s}}async importCharacter(r,e){try{return(await f.characters.importCharacter({format:r,preservedFileName:e})).data}catch(a){throw console.error("Failed to import character:",a),a}}async incrementUseCount(r){try{await f.characters.incrementUseCount({id:r})}catch(e){throw console.error("Failed to increment use count:",e),e}}async rateCharacter(r,e){try{return(await f.characters.rateCharacter({id:r,rateCharacterRequestDto:e})).data}catch(a){throw console.error("Failed to rate character:",a),a}}async remove(r){try{await f.characters.remove({id:r})}catch(e){throw console.error("Failed to remove character:",e),e}}async searchCharacters(r,e,a={}){try{return(await f.characters.searchCharacters({page:r,limit:e,...a})).data}catch(s){throw console.error("Failed to search characters:",s),s}}async unfavoriteCharacter(r){try{await f.characters.unfavoriteCharacter({id:r})}catch(e){throw console.error("Failed to unfavorite character:",e),e}}async update(r,e){try{return(await f.characters.update({id:r,updateCharacterRequestDto:e})).data}catch(a){throw console.error("Failed to update character:",a),a}}}cr=fr;[sr,nr]=hr(cr,[ar,ar.Singleton],[],1).c;nr();const E=new sr;function gr(t){const r=t.page||1,e=t.limit||20;console.log("searchCharacters API被调用，参数:",JSON.stringify(t)),console.log("page:",r,"limit:",e);const{page:a,limit:s,...P}=t;return E.searchCharacters(r,e,P).then(u=>(console.log("searchCharacters API返回:",JSON.stringify(u)),{characters:u.items,totalCount:u.total,currentPage:u.page,totalPages:Math.ceil(u.total/u.limit)})).catch(u=>{throw console.error("searchCharacters API错误:",u),u})}function yr(t){return E.getCharacterDetail(t)}function mr(t,r){return E.update(t,r)}function vr(){return E.getAllCategoriesWithPopularTags()}function wr(t,r){const a=t.get("format")||"silly_tavern",s=t.get("preservedFileName");return E.importCharacter(a,s)}export{yr as a,vr as g,wr as i,gr as s,mr as u};
