import{j as e,u as d,b4 as l}from"./index-DHn59PON.js";import{a as x,c as j,u as f}from"./role-D9ilQGY4.js";import"./react-DNsX-D9n.js";import{S as y}from"./SaveButton-C3t1dpAf.js";import{F as P}from"./FormContainer-DpHxr2hy.js";import{u as g}from"./useForm-DvBa9uP7.js";import{u}from"./useMutation-DMmFNPI2.js";import{e as h}from"./api-Do9ZfSCB.js";import{S as c,F as r,I as a}from"./antd-Bzi-nNZC.js";import{e as F}from"./menu-X84LJnO_.js";import"./echarts-C9Czxobr.js";import"./Button-BAizLNQh.js";import"./BackButton-CR-2uR7s.js";import"./useWindowSize-CaV-WCuS.js";function R({value:s=[],onChange:t}){const{data:i}=u({queryKey:["apiPermission"],queryFn:()=>h()}),o=(i==null?void 0:i.map(n=>({label:n.title,value:n.code})))||[];return e.jsx("div",{children:e.jsx(c,{value:s,onChange:t,options:o,mode:"multiple",allowClear:!0})})}function p({type:s,value:t=[],onChange:i}){const{data:o}=u({queryKey:["menuPermission",s],queryFn:()=>F(s)}),n=(o==null?void 0:o.map(m=>({label:m.title,value:m.code})))||[];return e.jsx("div",{children:e.jsx(c,{value:t,onChange:i,options:n,mode:"multiple",allowClear:!0})})}function N(){const{t:s}=d(),{title:t,formProps:i,isLoading:o,handleSubmit:n}=g({key:"role",getApiFn:x,createApiFn:j,updateApiFn:f,initialValues:{name:null,code:null,description:null,menuPermissions:[],featurePermissions:[],apiPermissions:[]}}),m={name:[{required:!0,message:s("page.systemRole.rules.name")}],code:[{required:!0,message:s("page.systemRole.rules.code")}]};return e.jsx(P,{title:t,children:e.jsxs(r,{...i,children:[e.jsx(r.Item,{label:s("page.systemUser.username"),name:"name",rules:m.name,children:e.jsx(a,{})}),e.jsx(r.Item,{label:s("page.systemRole.code"),name:"code",rules:m.code,children:e.jsx(a,{})}),e.jsx(r.Item,{label:s("page.systemRole.description"),name:"description",children:e.jsx(a,{})}),e.jsx(r.Item,{label:s("page.systemRole.menuPermissions"),name:"menuPermissions",children:e.jsx(p,{type:l.MENU})}),e.jsx(r.Item,{label:s("page.systemRole.featurePermissions"),name:"featurePermissions",children:e.jsx(p,{type:l.FEATURE})}),e.jsx(r.Item,{label:s("page.systemRole.apiPermissions"),name:"apiPermissions",children:e.jsx(R,{})}),e.jsx(r.Item,{wrapperCol:{offset:12,span:8},children:e.jsx(y,{type:"primary",loading:o,onClick:n})})]})})}export{N as default};
