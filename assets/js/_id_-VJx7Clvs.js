import{u as b,j as e}from"./index-CLsFyRhf.js";import{r as N}from"./react-DR1zDSRy.js";import{a as D,b as j,c as w,u as I}from"./api-BwKIJxFr.js";import{S as k}from"./SaveButton-BSfqNoUJ.js";import{F as T}from"./FormContainer-C6O0FyCH.js";import{A as t,a as m}from"./api-DqxKD7_o.js";import{u as P}from"./useForm-3lSAyR0K.js";import{u as F}from"./usePageTransfer-qrNh3eRn.js";import{u as V}from"./useMutation-Ca817NX4.js";import{i as C}from"./isNil-CHIgUVhi.js";import{I as n,F as i,z as q,d as O,T as S}from"./antd-Sq0EuMdw.js";import"./echarts-C5AzJBXJ.js";import"./Button-DKuw0GRZ.js";import"./useWindowSize-ncjCtajF.js";function M({value:r}){var p;const{t:u}=b(),{data:s}=V({queryKey:["flatMenu"],queryFn:D}),l=C(r)?u("page.systemApi.topApi"):(p=s==null?void 0:s.find(d=>d.id===r))==null?void 0:p.title;return e.jsxDEV(n,{value:l,disabled:!0},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/system/api/components/ParentName.tsx",lineNumber:25,columnNumber:10},this)}function Z(){const{t:r}=b(),{getTransferredData:u}=F(),s=u(),{title:l,isCreateMode:p,isEditMode:d,form:c,formProps:y,isLoading:f,handleSubmit:g}=P({key:"api",getApiFn:j,createApiFn:w,updateApiFn:I,initialValues:{parentId:s==null?void 0:s.id,title:null,type:null,path:null,method:null,code:null,description:null,sort:0}}),a=i.useWatch([],c),x=p?s==null?void 0:s.id:a==null?void 0:a.parentId,A=N.useMemo(()=>[{label:r("page.systemApi.directory"),value:t.DIRECTORY},{label:r("page.systemApi.api"),value:t.API}],[r]),E=[{label:"GET",value:m.GET},{label:"POST",value:m.POST},{label:"PUT",value:m.PUT},{label:"PATCH",value:m.PATCH},{label:"DELETE",value:m.DELETE}],o=N.useMemo(()=>{const h={title:[{required:!0,message:r("page.systemApi.rules.title")}],type:[{required:!0,message:r("page.systemApi.rules.type")}]};return(a==null?void 0:a.type)===t.API?{...h,path:[{required:!0,message:r("page.systemApi.rules.path")}],method:[{required:!0,message:r("page.systemApi.rules.method")}]}:h},[a==null?void 0:a.type,r]),v=()=>{c.setFieldsValue({method:null,path:null,code:null})};return e.jsxDEV(T,{title:l,children:e.jsxDEV(i,{...y,onFinish:g,children:[e.jsxDEV(i.Item,{label:r("page.systemApi.parentApi"),children:e.jsxDEV(M,{value:x},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/system/api/[mode]/[id].tsx",lineNumber:116,columnNumber:11},this)},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/system/api/[mode]/[id].tsx",lineNumber:115,columnNumber:9},this),e.jsxDEV(i.Item,{label:r("page.systemApi.title"),name:"title",rules:o.title,children:e.jsxDEV(n,{},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/system/api/[mode]/[id].tsx",lineNumber:124,columnNumber:11},this)},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/system/api/[mode]/[id].tsx",lineNumber:119,columnNumber:9},this),e.jsxDEV(i.Item,{label:r("page.systemApi.description"),name:"description",children:e.jsxDEV(n.TextArea,{},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/system/api/[mode]/[id].tsx",lineNumber:131,columnNumber:11},this)},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/system/api/[mode]/[id].tsx",lineNumber:127,columnNumber:9},this),e.jsxDEV(i.Item,{label:r("page.systemApi.type"),name:"type",rules:o.type,children:e.jsxDEV(q.Group,{optionType:"button",options:A,disabled:d,onChange:v},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/system/api/[mode]/[id].tsx",lineNumber:139,columnNumber:11},this)},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/system/api/[mode]/[id].tsx",lineNumber:134,columnNumber:9},this),(a==null?void 0:a.type)===t.API&&e.jsxDEV(i.Item,{label:r("page.systemApi.path"),name:"path",rules:o.path,children:e.jsxDEV(n,{},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/system/api/[mode]/[id].tsx",lineNumber:153,columnNumber:13},this)},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/system/api/[mode]/[id].tsx",lineNumber:148,columnNumber:9},this),(a==null?void 0:a.type)===t.API&&e.jsxDEV(i.Item,{label:r("page.systemApi.method"),name:"method",rules:o.method,children:e.jsxDEV(O,{options:E,allowClear:!0},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/system/api/[mode]/[id].tsx",lineNumber:163,columnNumber:13},this)},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/system/api/[mode]/[id].tsx",lineNumber:158,columnNumber:9},this),(a==null?void 0:a.type)===t.API&&e.jsxDEV(i.Item,{label:r("page.systemApi.code"),name:"code",children:e.jsxDEV(n,{},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/system/api/[mode]/[id].tsx",lineNumber:175,columnNumber:13},this)},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/system/api/[mode]/[id].tsx",lineNumber:171,columnNumber:9},this),e.jsxDEV(i.Item,{label:r("page.systemApi.sort"),name:"sort",children:e.jsxDEV(S,{min:0,precision:0},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/system/api/[mode]/[id].tsx",lineNumber:183,columnNumber:11},this)},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/system/api/[mode]/[id].tsx",lineNumber:179,columnNumber:9},this),e.jsxDEV(i.Item,{wrapperCol:{offset:12,span:8},children:e.jsxDEV(k,{type:"primary",loading:f},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/system/api/[mode]/[id].tsx",lineNumber:187,columnNumber:11},this)},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/system/api/[mode]/[id].tsx",lineNumber:186,columnNumber:9},this)]},void 0,!0,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/system/api/[mode]/[id].tsx",lineNumber:111,columnNumber:7},this)},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/system/api/[mode]/[id].tsx",lineNumber:110,columnNumber:5},this)}export{Z as default};
