import{u as G,j as e}from"./index-Cvcm6e8Y.js";import{r as o,u as Y}from"./react-DR1zDSRy.js";import{A as d}from"./admin-service-C55UcVBh.js";import{B as H}from"./BatchDeleteButton-m1u7vpAY.js";import{C as K}from"./CreateButton-CkHzS0zd.js";import{D as Q}from"./DeleteButton-BxHxA6xV.js";import{E as W,S as X}from"./SearchContainer-D_YB6-KZ.js";import{S as Z,a as f,b as ee,R as re}from"./SearchRow-9WdvXjWs.js";import{u as ie,a as ae,S as ne}from"./useTable-B_erNWjE.js";import{A as te,F as n,B as c,e as p,S as D,I as s,d as t,b as V,c as me,E as j,M as le,T as b,f as se}from"./antd-CDJKHjm9.js";import"./echarts-C5AzJBXJ.js";import"./Button-CLr_gZa1.js";import"./useWindowSize-ncjCtajF.js";import"./useMutation-CjADi6xa.js";import"./usePageTransfer-BUA2yO1w.js";const y={ACTIVE:"active",INACTIVE:"inactive",DEPRECATED:"deprecated",TESTING:"testing"};function De(){const{t:i}=G(),I=o.useRef(null),{message:l}=te.useApp(),C=Y(),[S,u]=o.useState(!1),[x]=n.useForm(),[g,T]=o.useState([]),[F,E]=o.useState(!1);o.useEffect(()=>{(async()=>{try{const a=await d.getAllProviders();T(a)}catch(a){console.error("获取供应商列表失败:",a),l.error("获取供应商列表失败")}})()},[l]),o.useEffect(()=>{const r=localStorage.getItem("user.token");console.log("当前token状态:",r?"已存在":"不存在",r?`${r.substring(0,15)}...`:"")},[]);async function A({page:r,pageSize:a}){console.log("正在请求模型列表...",{page:r,pageSize:a});try{const m=await d.getAllModels();return console.log("模型列表获取成功:",m),{list:m,total:m.length}}catch(m){return console.error("获取模型列表失败:",m),m instanceof Error?l.error(`获取模型列表失败: ${m.message}`):l.error("获取模型列表失败: 未知错误"),{list:[],total:0}}}const{listContainerProps:M,tableScrollY:v}=ie(),h=r=>{if(r==null)return"-";if(typeof r=="string")return r;if(typeof r=="number")return r.toString();if(typeof r=="boolean")return i(r?"是":"否");try{return JSON.stringify(r)}catch{return String(r)}},B=r=>{const m={active:{color:"green",text:"活跃"},inactive:{color:"red",text:"非活跃"},deprecated:{color:"orange",text:"已弃用"},testing:{color:"blue",text:"测试中"}}[r]||{color:"default",text:r};return e.jsxDEV(se,{color:m.color,children:m.text},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/model/index.tsx",lineNumber:122,columnNumber:12},this)},{form:O,tableProps:P,isLoading:L,selectedIsEmpty:R,selectedCount:z,handleReset:w}=ae({key:"model-list",pagination:!0,listApiFn:A,scrollY:v,selectable:!0,formInitialValues:{name:null,providerId:null,status:null},columns:[{title:i("ID"),dataIndex:"id",width:100,fixed:"left",render:(r,a)=>e.jsxDEV(c,{type:"link",size:"small",style:{padding:0,height:"auto",fontSize:"12px"},onClick:()=>k(a),children:r},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/model/index.tsx",lineNumber:151,columnNumber:7},this)},{title:i("模型名称"),dataIndex:"name",width:150,fixed:"left"},{title:i("模型标识符"),dataIndex:"modelIdentifier",width:150},{title:i("供应商"),dataIndex:"providerName",width:120},{title:i("描述"),dataIndex:"description",render:h,width:200},{title:i("上下文长度"),dataIndex:"contextLength",width:100},{title:i("推荐用途"),dataIndex:"recommendedUse",render:h,width:150},{title:i("使用场景"),dataIndex:"useCase",render:h,width:150},{title:i("优先级"),dataIndex:"priority",width:80},{title:i("最小计费单位"),dataIndex:"minBillingUnit",width:100},{title:i("状态"),dataIndex:"status",render:B,width:100},{title:i("是否启用"),dataIndex:"isEnabled",render:r=>e.jsxDEV(p,{checked:r,disabled:!0,size:"small"},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/model/index.tsx",lineNumber:180,columnNumber:7},this),width:80},{title:i("是否默认"),dataIndex:"isDefault",render:r=>e.jsxDEV(p,{checked:r,disabled:!0,size:"small"},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/model/index.tsx",lineNumber:188,columnNumber:7},this),width:80},{title:i("操作"),key:"actions",fixed:"right",width:120,render:(r,a)=>e.jsxDEV(D,{size:"small",children:[e.jsxDEV(W,{type:"text",size:"small",noText:!0,onClick:()=>k(a)},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/model/index.tsx",lineNumber:199,columnNumber:13},this),e.jsxDEV(c,{type:"text",size:"small",onClick:()=>U(a),style:{color:a.isEnabled?"#ff4d4f":"#52c41a"},children:a.isEnabled?"禁用":"启用"},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/model/index.tsx",lineNumber:200,columnNumber:13},this),e.jsxDEV(Q,{type:"text",size:"small",noText:!0,onConfirm:()=>J(a.id)},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/model/index.tsx",lineNumber:208,columnNumber:13},this)]},void 0,!0,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/model/index.tsx",lineNumber:198,columnNumber:7},this)}]}),N=()=>{w()};function k(r){C(`/model/${r.id}/edit`)}async function U(r){try{const a={isEnabled:!r.isEnabled};await d.updateModelStatus(r.id,a),l.success(i("状态更新成功")),N()}catch(a){console.error("更新模型状态失败:",a),l.error(i("状态更新失败"))}}async function J(r){try{await d.deleteModel(r),l.success(i("删除成功")),N()}catch(a){console.error("删除模型失败:",a),l.error(i("删除失败"))}}const q=e.jsxDEV(n,{ref:I,form:O,colon:!1,autoComplete:"off",onFinish:()=>{},children:e.jsxDEV(X,{actions:e.jsxDEV(e.Fragment,{children:[e.jsxDEV(D,{children:[e.jsxDEV(ee,{loading:L},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/model/index.tsx",lineNumber:266,columnNumber:15},this),e.jsxDEV(re,{onClick:w},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/model/index.tsx",lineNumber:267,columnNumber:15},this)]},void 0,!0,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/model/index.tsx",lineNumber:265,columnNumber:13},this),e.jsxDEV(V,{type:"vertical"},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/model/index.tsx",lineNumber:269,columnNumber:13},this),e.jsxDEV(H,{disabled:R,count:z,onConfirm:()=>{}},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/model/index.tsx",lineNumber:270,columnNumber:13},this),e.jsxDEV(V,{type:"vertical"},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/model/index.tsx",lineNumber:275,columnNumber:13},this),e.jsxDEV(K,{onClick:()=>_()},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/model/index.tsx",lineNumber:276,columnNumber:13},this)]},void 0,!0,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/model/index.tsx",lineNumber:264,columnNumber:7},this),children:e.jsxDEV(Z,{children:[e.jsxDEV(f,{name:"name",label:i("模型名称"),children:e.jsxDEV(s,{},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/model/index.tsx",lineNumber:282,columnNumber:13},this)},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/model/index.tsx",lineNumber:281,columnNumber:11},this),e.jsxDEV(f,{name:"providerId",label:i("供应商"),children:e.jsxDEV(t,{placeholder:i("请选择供应商"),allowClear:!0,children:g.map(r=>e.jsxDEV(t.Option,{value:r.id,children:r.name},r.id,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/model/index.tsx",lineNumber:287,columnNumber:13},this))},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/model/index.tsx",lineNumber:285,columnNumber:13},this)},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/model/index.tsx",lineNumber:284,columnNumber:11},this),e.jsxDEV(f,{name:"status",label:i("状态"),children:e.jsxDEV(t,{placeholder:i("请选择状态"),allowClear:!0,children:[e.jsxDEV(t.Option,{value:"active",children:"活跃"},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/model/index.tsx",lineNumber:295,columnNumber:15},this),e.jsxDEV(t.Option,{value:"inactive",children:"非活跃"},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/model/index.tsx",lineNumber:296,columnNumber:15},this),e.jsxDEV(t.Option,{value:"deprecated",children:"已弃用"},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/model/index.tsx",lineNumber:297,columnNumber:15},this),e.jsxDEV(t.Option,{value:"testing",children:"测试中"},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/model/index.tsx",lineNumber:298,columnNumber:15},this)]},void 0,!0,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/model/index.tsx",lineNumber:294,columnNumber:13},this)},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/model/index.tsx",lineNumber:293,columnNumber:11},this)]},void 0,!0,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/model/index.tsx",lineNumber:280,columnNumber:9},this)},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/model/index.tsx",lineNumber:262,columnNumber:7},this)},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/model/index.tsx",lineNumber:255,columnNumber:3},this);function _(){x.resetFields(),u(!0)}async function $(){try{const r=await x.validateFields();E(!0);let a=null;if(r.supportedFeatures&&r.supportedFeatures.trim())try{a=JSON.parse(r.supportedFeatures)}catch{l.error(i("支持的功能JSON格式错误"));return}const m={name:r.name,description:r.description||void 0,providerId:r.providerId,modelIdentifier:r.modelIdentifier,contextLength:r.contextLength||4096,supportedFeatures:a,recommendedUse:r.recommendedUse||void 0,isEnabled:r.isEnabled??!0,priority:r.priority||0,status:r.status||y.ACTIVE,minBillingUnit:r.minBillingUnit||1,isDefault:r.isDefault||!1,useCase:r.useCase||void 0};await d.createModel(m),l.success(i("创建成功")),u(!1),N()}catch(r){console.error("创建模型失败:",r),l.error(i("创建失败"))}finally{E(!1)}}return e.jsxDEV(e.Fragment,{children:[e.jsxDEV(ne,{...M,searchForm:q,children:e.jsxDEV(me,{...P,scroll:{x:1400,y:v},locale:{emptyText:e.jsxDEV(j,{description:i("暂无模型数据"),image:j.PRESENTED_IMAGE_SIMPLE},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/model/index.tsx",lineNumber:364,columnNumber:24},this)}},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/model/index.tsx",lineNumber:360,columnNumber:9},this)},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/model/index.tsx",lineNumber:359,columnNumber:7},this),e.jsxDEV(le,{title:i("创建模型"),open:S,onCancel:()=>u(!1),width:800,footer:[e.jsxDEV(c,{onClick:()=>u(!1),children:i("取消")},"cancel",!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/model/index.tsx",lineNumber:376,columnNumber:9},this),e.jsxDEV(c,{type:"primary",loading:F,onClick:$,children:i("确定")},"submit",!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/model/index.tsx",lineNumber:379,columnNumber:9},this)],children:e.jsxDEV(n,{form:x,layout:"vertical",autoComplete:"off",children:[e.jsxDEV(n.Item,{name:"name",label:i("模型名称"),rules:[{required:!0,message:i("请输入模型名称")}],children:e.jsxDEV(s,{placeholder:i("请输入模型名称")},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/model/index.tsx",lineNumber:399,columnNumber:13},this)},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/model/index.tsx",lineNumber:394,columnNumber:11},this),e.jsxDEV(n.Item,{name:"providerId",label:i("供应商"),rules:[{required:!0,message:i("请选择供应商")}],children:e.jsxDEV(t,{placeholder:i("请选择供应商"),children:g.map(r=>e.jsxDEV(t.Option,{value:r.id,children:r.name},r.id,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/model/index.tsx",lineNumber:409,columnNumber:15},this))},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/model/index.tsx",lineNumber:407,columnNumber:13},this)},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/model/index.tsx",lineNumber:402,columnNumber:11},this),e.jsxDEV(n.Item,{name:"modelIdentifier",label:i("模型标识符"),rules:[{required:!0,message:i("请输入模型标识符")}],children:e.jsxDEV(s,{placeholder:i("请输入模型标识符")},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/model/index.tsx",lineNumber:421,columnNumber:13},this)},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/model/index.tsx",lineNumber:416,columnNumber:11},this),e.jsxDEV(n.Item,{name:"description",label:i("模型描述"),children:e.jsxDEV(s.TextArea,{rows:3,placeholder:i("请输入模型描述")},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/model/index.tsx",lineNumber:428,columnNumber:13},this)},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/model/index.tsx",lineNumber:424,columnNumber:11},this),e.jsxDEV("div",{style:{display:"flex",gap:"16px"},children:[e.jsxDEV(n.Item,{name:"contextLength",label:i("上下文长度"),style:{flex:1},initialValue:4096,children:e.jsxDEV(b,{min:1,style:{width:"100%"},placeholder:"4096"},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/model/index.tsx",lineNumber:438,columnNumber:15},this)},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/model/index.tsx",lineNumber:432,columnNumber:13},this),e.jsxDEV(n.Item,{name:"priority",label:i("优先级"),style:{flex:1},initialValue:0,children:e.jsxDEV(b,{style:{width:"100%"},placeholder:"0"},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/model/index.tsx",lineNumber:447,columnNumber:15},this)},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/model/index.tsx",lineNumber:441,columnNumber:13},this)]},void 0,!0,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/model/index.tsx",lineNumber:431,columnNumber:11},this),e.jsxDEV(n.Item,{name:"minBillingUnit",label:i("最小计费单位"),initialValue:1,children:e.jsxDEV(b,{min:1,style:{width:"100%"},placeholder:"1"},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/model/index.tsx",lineNumber:456,columnNumber:13},this)},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/model/index.tsx",lineNumber:451,columnNumber:11},this),e.jsxDEV(n.Item,{name:"status",label:i("模型状态"),initialValue:y.ACTIVE,children:e.jsxDEV(t,{children:[e.jsxDEV(t.Option,{value:"active",children:"活跃"},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/model/index.tsx",lineNumber:465,columnNumber:15},this),e.jsxDEV(t.Option,{value:"inactive",children:"非活跃"},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/model/index.tsx",lineNumber:466,columnNumber:15},this),e.jsxDEV(t.Option,{value:"deprecated",children:"已弃用"},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/model/index.tsx",lineNumber:467,columnNumber:15},this),e.jsxDEV(t.Option,{value:"testing",children:"测试中"},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/model/index.tsx",lineNumber:468,columnNumber:15},this)]},void 0,!0,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/model/index.tsx",lineNumber:464,columnNumber:13},this)},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/model/index.tsx",lineNumber:459,columnNumber:11},this),e.jsxDEV(n.Item,{name:"recommendedUse",label:i("推荐用途"),children:e.jsxDEV(s,{placeholder:i("请输入推荐用途")},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/model/index.tsx",lineNumber:476,columnNumber:13},this)},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/model/index.tsx",lineNumber:472,columnNumber:11},this),e.jsxDEV(n.Item,{name:"useCase",label:i("使用场景"),children:e.jsxDEV(s,{placeholder:i("请输入使用场景")},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/model/index.tsx",lineNumber:483,columnNumber:13},this)},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/model/index.tsx",lineNumber:479,columnNumber:11},this),e.jsxDEV(n.Item,{name:"supportedFeatures",label:i("支持的功能"),help:i("请输入有效的JSON格式"),children:e.jsxDEV(s.TextArea,{rows:4,placeholder:'{"chat": true, "completion": true}'},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/model/index.tsx",lineNumber:491,columnNumber:13},this)},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/model/index.tsx",lineNumber:486,columnNumber:11},this),e.jsxDEV("div",{style:{display:"flex",gap:"16px"},children:[e.jsxDEV(n.Item,{name:"isEnabled",label:i("是否启用"),valuePropName:"checked",initialValue:!0,style:{flex:1},children:e.jsxDEV(p,{},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/model/index.tsx",lineNumber:502,columnNumber:15},this)},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/model/index.tsx",lineNumber:495,columnNumber:13},this),e.jsxDEV(n.Item,{name:"isDefault",label:i("是否默认"),valuePropName:"checked",initialValue:!1,style:{flex:1},children:e.jsxDEV(p,{},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/model/index.tsx",lineNumber:512,columnNumber:15},this)},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/model/index.tsx",lineNumber:505,columnNumber:13},this)]},void 0,!0,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/model/index.tsx",lineNumber:494,columnNumber:11},this)]},void 0,!0,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/model/index.tsx",lineNumber:389,columnNumber:9},this)},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/model/index.tsx",lineNumber:370,columnNumber:7},this)]},void 0,!0,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/model/index.tsx",lineNumber:358,columnNumber:5},this)}export{De as default};
