import{j as e}from"./index-JkWopOOq.js";import{e as ie,u as oe,r as m}from"./react-DR1zDSRy.js";import{W as s}from"./worldinfo-service-B-iFwN46.js";import{F as o,M as R,I as x,R as C,a as d,d as I,l as u,T as ae,B as f,i as de,f as v,j as G,C as S,L as k,b as le,S as $,v as q,c as me,w as se,s as i,e as ue,x as te,y as ce}from"./antd-Sq0EuMdw.js";import"./echarts-C5AzJBXJ.js";const{Option:D}=I,fe=({visible:a,onCancel:l,onOk:w,initialValues:h,title:t})=>{const[p]=o.useForm(),V=()=>{p.validateFields().then(N=>{p.resetFields(),w(N)}).catch(N=>{console.log("Validate Failed:",N)})};return e.jsxDEV(R,{open:a,title:t,onCancel:l,onOk:V,width:800,destroyOnClose:!0,children:e.jsxDEV(o,{form:p,layout:"vertical",initialValues:h||{selective:!0,priority:100,constant:!1,disable:!1,caseSensitive:!1,searchRange:"Global",regex:!1,groupScore:"None",automationId:""},children:[e.jsxDEV(o.Item,{name:"name",label:"名称",rules:[{required:!0,message:"请输入名称"}],children:e.jsxDEV(x,{},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/worldinfo/components/WorldInfoEntryForm.tsx",lineNumber:45,columnNumber:13},void 0)},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/worldinfo/components/WorldInfoEntryForm.tsx",lineNumber:44,columnNumber:9},void 0),e.jsxDEV(o.Item,{name:"keys",label:"主要关键字 (逗号分隔)",rules:[{required:!0,message:"请输入关键字"}],children:e.jsxDEV(x,{},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/worldinfo/components/WorldInfoEntryForm.tsx",lineNumber:48,columnNumber:11},void 0)},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/worldinfo/components/WorldInfoEntryForm.tsx",lineNumber:47,columnNumber:9},void 0),e.jsxDEV(C,{gutter:16,children:[e.jsxDEV(d,{span:8,children:e.jsxDEV(o.Item,{name:"searchRange",label:"扫描深度",children:e.jsxDEV(I,{children:[e.jsxDEV(D,{value:"Global",children:"使用全局设置"},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/worldinfo/components/WorldInfoEntryForm.tsx",lineNumber:54,columnNumber:25},void 0),e.jsxDEV(D,{value:"Character",children:"角色定义"},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/worldinfo/components/WorldInfoEntryForm.tsx",lineNumber:55,columnNumber:25},void 0),e.jsxDEV(D,{value:"Memory",children:"记忆"},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/worldinfo/components/WorldInfoEntryForm.tsx",lineNumber:56,columnNumber:25},void 0),e.jsxDEV(D,{value:"ChatHistory",children:"聊天记录"},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/worldinfo/components/WorldInfoEntryForm.tsx",lineNumber:57,columnNumber:25},void 0)]},void 0,!0,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/worldinfo/components/WorldInfoEntryForm.tsx",lineNumber:53,columnNumber:21},void 0)},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/worldinfo/components/WorldInfoEntryForm.tsx",lineNumber:52,columnNumber:17},void 0)},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/worldinfo/components/WorldInfoEntryForm.tsx",lineNumber:51,columnNumber:13},void 0),e.jsxDEV(d,{span:8,children:e.jsxDEV(o.Item,{name:"caseSensitive",label:"区分大小写",valuePropName:"checked",children:e.jsxDEV(u,{},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/worldinfo/components/WorldInfoEntryForm.tsx",lineNumber:63,columnNumber:22},void 0)},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/worldinfo/components/WorldInfoEntryForm.tsx",lineNumber:62,columnNumber:17},void 0)},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/worldinfo/components/WorldInfoEntryForm.tsx",lineNumber:61,columnNumber:14},void 0),e.jsxDEV(d,{span:8,children:e.jsxDEV(o.Item,{name:"regex",label:"Whole Words",valuePropName:"checked",children:e.jsxDEV(u,{},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/worldinfo/components/WorldInfoEntryForm.tsx",lineNumber:68,columnNumber:21},void 0)},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/worldinfo/components/WorldInfoEntryForm.tsx",lineNumber:67,columnNumber:17},void 0)},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/worldinfo/components/WorldInfoEntryForm.tsx",lineNumber:66,columnNumber:14},void 0)]},void 0,!0,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/worldinfo/components/WorldInfoEntryForm.tsx",lineNumber:50,columnNumber:9},void 0),e.jsxDEV(o.Item,{name:"content",label:"内容",rules:[{required:!0,message:"请输入内容"}],children:e.jsxDEV(x.TextArea,{rows:6},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/worldinfo/components/WorldInfoEntryForm.tsx",lineNumber:73,columnNumber:11},void 0)},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/worldinfo/components/WorldInfoEntryForm.tsx",lineNumber:72,columnNumber:9},void 0),e.jsxDEV(C,{gutter:16,children:[e.jsxDEV(d,{span:8,children:e.jsxDEV(o.Item,{name:"disable",valuePropName:"checked",children:e.jsxDEV(u,{children:"不可递归"},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/worldinfo/components/WorldInfoEntryForm.tsx",lineNumber:78,columnNumber:15},void 0)},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/worldinfo/components/WorldInfoEntryForm.tsx",lineNumber:77,columnNumber:13},void 0)},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/worldinfo/components/WorldInfoEntryForm.tsx",lineNumber:76,columnNumber:11},void 0),e.jsxDEV(d,{span:8,children:e.jsxDEV(o.Item,{name:"prevent_recursion",valuePropName:"checked",children:e.jsxDEV(u,{children:"防止进一步递归"},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/worldinfo/components/WorldInfoEntryForm.tsx",lineNumber:83,columnNumber:15},void 0)},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/worldinfo/components/WorldInfoEntryForm.tsx",lineNumber:82,columnNumber:13},void 0)},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/worldinfo/components/WorldInfoEntryForm.tsx",lineNumber:81,columnNumber:11},void 0),e.jsxDEV(d,{span:8,children:e.jsxDEV(o.Item,{name:"delay_recursion",valuePropName:"checked",children:e.jsxDEV(u,{children:"延迟到递归"},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/worldinfo/components/WorldInfoEntryForm.tsx",lineNumber:88,columnNumber:15},void 0)},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/worldinfo/components/WorldInfoEntryForm.tsx",lineNumber:87,columnNumber:14},void 0)},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/worldinfo/components/WorldInfoEntryForm.tsx",lineNumber:86,columnNumber:11},void 0)]},void 0,!0,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/worldinfo/components/WorldInfoEntryForm.tsx",lineNumber:75,columnNumber:9},void 0),e.jsxDEV(C,{gutter:16,children:[e.jsxDEV(d,{span:6,children:e.jsxDEV(o.Item,{label:"确定优先极",children:e.jsxDEV(u,{},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/worldinfo/components/WorldInfoEntryForm.tsx",lineNumber:95,columnNumber:21},void 0)},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/worldinfo/components/WorldInfoEntryForm.tsx",lineNumber:94,columnNumber:17},void 0)},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/worldinfo/components/WorldInfoEntryForm.tsx",lineNumber:93,columnNumber:13},void 0),e.jsxDEV(d,{span:6,children:e.jsxDEV(o.Item,{name:"priority",label:"组权重",children:e.jsxDEV(ae,{style:{width:"100%"}},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/worldinfo/components/WorldInfoEntryForm.tsx",lineNumber:100,columnNumber:19},void 0)},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/worldinfo/components/WorldInfoEntryForm.tsx",lineNumber:99,columnNumber:18},void 0)},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/worldinfo/components/WorldInfoEntryForm.tsx",lineNumber:98,columnNumber:13},void 0),e.jsxDEV(d,{span:6,children:e.jsxDEV(o.Item,{label:"黏性",children:e.jsxDEV(u,{children:"无黏性"},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/worldinfo/components/WorldInfoEntryForm.tsx",lineNumber:105,columnNumber:22},void 0)},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/worldinfo/components/WorldInfoEntryForm.tsx",lineNumber:104,columnNumber:17},void 0)},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/worldinfo/components/WorldInfoEntryForm.tsx",lineNumber:103,columnNumber:13},void 0),e.jsxDEV(d,{span:6,children:e.jsxDEV(o.Item,{label:"排除",children:e.jsxDEV(u,{children:"排除"},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/worldinfo/components/WorldInfoEntryForm.tsx",lineNumber:110,columnNumber:22},void 0)},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/worldinfo/components/WorldInfoEntryForm.tsx",lineNumber:109,columnNumber:17},void 0)},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/worldinfo/components/WorldInfoEntryForm.tsx",lineNumber:108,columnNumber:14},void 0)]},void 0,!0,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/worldinfo/components/WorldInfoEntryForm.tsx",lineNumber:92,columnNumber:9},void 0)]},void 0,!0,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/worldinfo/components/WorldInfoEntryForm.tsx",lineNumber:39,columnNumber:7},void 0)},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/worldinfo/components/WorldInfoEntryForm.tsx",lineNumber:31,columnNumber:5},void 0)},{Title:T}=de,{Option:pe}=I,{TabPane:B}=G,z=[{value:"GLOBAL",label:"全局世界书",description:"适用于所有对话的通用信息",color:"blue"},{value:"CHARACTER",label:"角色世界书",description:"特定角色相关的背景信息",color:"green"},{value:"CHAT",label:"对话世界书",description:"特定对话场景的信息",color:"orange"},{value:"PERSONA",label:"个人世界书",description:"个人角色设定信息",color:"purple"},{value:"USER",label:"用户自定义",description:"用户自定义的世界信息",color:"default"}],ge=()=>{const{id:a}=ie(),l=oe(),[w]=o.useForm(),[h]=o.useForm(),[t,p]=m.useState(null),[V,N]=m.useState([]),[c,H]=m.useState(null),[O,A]=m.useState(!0),[K,M]=m.useState(!1),[P,j]=m.useState(!1),[U,g]=m.useState(!1),[b,Y]=m.useState("character"),E=async()=>{if(!a){i.error("世界信息ID不存在"),l("/worldinfo");return}A(!0);try{console.log("Fetching world info details for ID:",a);const r=await s.getWorldInfoById(a);console.log("World info fetched:",r),p(r),w.setFieldsValue({name:r.name,description:r.description,type:r.type});try{const n=await s.getWorldInfoEntries(a);console.log("Entries fetched:",n),N(n)}catch(n){console.error("Failed to fetch entries:",n),i.warning("获取世界信息条目失败，但主要信息已加载"),N([])}}catch(r){console.error("Failed to fetch world info details:",r),r instanceof Error?r.message.includes("404")||r.message.includes("Not Found")?(i.error("世界信息不存在，可能已被删除"),l("/worldinfo")):r.message.includes("403")||r.message.includes("Forbidden")?(i.error("没有权限访问此世界信息"),l("/worldinfo")):r.message.includes("Network Error")||r.message.includes("timeout")?i.error("网络连接失败，请检查网络连接"):i.error(`获取世界信息详情失败: ${r.message}`):i.error("获取世界信息详情失败，请稍后重试")}finally{A(!1)}},L=async()=>{if(a){M(!0);try{console.log("Fetching bindings for world info ID:",a);const r=await s.getWorldInfoBindings(a);console.log("Bindings fetched:",r),H(r)}catch(r){console.error("Failed to fetch bindings:",r),i.warning("获取绑定信息失败")}finally{M(!1)}}};m.useEffect(()=>{E(),L()},[a]);const J=async r=>{if(!a||!t){i.error("世界信息数据不完整");return}try{const n={...r};console.log("Updating world info with:",n),await s.updateWorldInfo(a,n),i.success("世界信息更新成功！"),p(y=>y?{...y,name:r.name,description:r.description,type:r.type}:null)}catch(n){console.error("Failed to update world info:",n),n instanceof Error?i.error(`更新世界信息失败: ${n.message}`):i.error("更新世界信息失败，请稍后重试")}},Q=()=>{j(!0)},_=r=>{Y(r),g(!0),h.resetFields()},X=r=>{if(!a){i.error("世界信息ID不存在");return}R.confirm({title:"确定要删除此条目吗？",content:"删除后无法恢复",onOk:async()=>{try{await s.deleteWorldInfoEntry(a,r),i.success("条目删除成功"),E()}catch(n){console.error("Failed to delete entry:",n),n instanceof Error?i.error(`删除条目失败: ${n.message}`):i.error("删除条目失败，请稍后重试")}}})},Z=async r=>{if(!a){i.error("世界信息ID不存在");return}try{console.log("Creating entry with values:",r),await s.createWorldInfoEntry(a,r),i.success("条目创建成功"),j(!1),E()}catch(n){console.error("Failed to create entry:",n),n instanceof Error?i.error(`创建条目失败: ${n.message}`):i.error("创建条目失败，请稍后重试")}},ee=async r=>{if(!a){i.error("世界信息ID不存在");return}try{b==="character"?(await s.associateWithCharacter(a,r.targetId),i.success("成功绑定到角色")):(await s.associateWithStory(a,r.targetId),i.success("成功绑定到故事")),g(!1),h.resetFields(),L()}catch(n){console.error("Failed to create binding:",n),n instanceof Error?i.error(`绑定失败: ${n.message}`):i.error("绑定失败，请稍后重试")}},re=()=>t?z.find(r=>r.value===t.type):null,ne=[{title:"ID",dataIndex:"id",key:"id",width:280,ellipsis:!0,render:(r,n)=>e.jsxDEV("a",{onClick:()=>l(`/worldinfo/${a}/${n.id}`),children:r},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/worldinfo/[id]/index.tsx",lineNumber:250,columnNumber:5},void 0)},{title:"Keywords",dataIndex:"keys",key:"keys",render:r=>Array.isArray(r)?r.join(", "):""},{title:"备忘",dataIndex:"comment",key:"comment",ellipsis:!0},{title:"插入位置",dataIndex:"position",key:"position",render:r=>r==="before_char"?"角色定义之前":r==="after_char"?"角色定义之后":r},{title:"深度",dataIndex:"scanDepth",key:"scanDepth"},{title:"顺序",dataIndex:"order",key:"order"},{title:"触发概率",dataIndex:"probability",key:"probability",render:r=>`${r??100}%`},{title:"启用状态",dataIndex:"enabled",key:"enabled",render:(r,n)=>e.jsxDEV(ue,{checked:r,checkedChildren:"启用",unCheckedChildren:"禁用",onChange:async y=>{try{await s.updateWorldInfoEntry(a,n.id,{enabled:y}),i.success("状态更新成功"),E()}catch(W){console.error("Failed to update entry status:",W),W instanceof Error?i.error(`状态更新失败: ${W.message}`):i.error("状态更新失败，请稍后重试")}}},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/worldinfo/[id]/index.tsx",lineNumber:275,columnNumber:5},void 0)},{title:"操作",key:"action",render:(r,n)=>e.jsxDEV($,{size:"middle",children:[e.jsxDEV(te,{style:{cursor:"pointer"},onClick:()=>l(`/worldinfo/${a}/${n.id}`)},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/worldinfo/[id]/index.tsx",lineNumber:301,columnNumber:21},void 0),e.jsxDEV(ce,{style:{color:"red",cursor:"pointer"},onClick:()=>X(n.id)},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/worldinfo/[id]/index.tsx",lineNumber:302,columnNumber:21},void 0)]},void 0,!0,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/worldinfo/[id]/index.tsx",lineNumber:300,columnNumber:5},void 0)}],F=re();return e.jsxDEV("div",{children:[e.jsxDEV("div",{style:{display:"flex",alignItems:"center",marginBottom:"16px"},children:[e.jsxDEV(f,{onClick:()=>l("/worldinfo"),style:{marginRight:"16px"},children:"返回"},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/worldinfo/[id]/index.tsx",lineNumber:313,columnNumber:17},void 0),e.jsxDEV(T,{level:4,style:{marginBottom:0},children:t?`编辑世界信息: ${t.name}`:"编辑世界信息"},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/worldinfo/[id]/index.tsx",lineNumber:316,columnNumber:17},void 0),F&&e.jsxDEV(v,{color:F.color,style:{marginLeft:"16px"},children:F.label},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/worldinfo/[id]/index.tsx",lineNumber:320,columnNumber:9},void 0)]},void 0,!0,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/worldinfo/[id]/index.tsx",lineNumber:312,columnNumber:13},void 0),e.jsxDEV(G,{defaultActiveKey:"1",children:[e.jsxDEV(B,{tab:"基本信息",children:e.jsxDEV(S,{title:"基本信息",loading:O,children:e.jsxDEV(o,{form:w,layout:"vertical",onFinish:J,children:[e.jsxDEV(o.Item,{name:"name",label:"名称",rules:[{required:!0,message:"请输入名称"}],children:e.jsxDEV(x,{placeholder:"请输入世界信息名称"},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/worldinfo/[id]/index.tsx",lineNumber:331,columnNumber:33},void 0)},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/worldinfo/[id]/index.tsx",lineNumber:330,columnNumber:29},void 0),e.jsxDEV(o.Item,{name:"type",label:"类型",rules:[{required:!0,message:"请选择世界书类型"}],children:e.jsxDEV(I,{placeholder:"请选择世界书类型",children:z.map(r=>e.jsxDEV(pe,{value:r.value,children:e.jsxDEV("div",{children:[e.jsxDEV(v,{color:r.color,style:{marginRight:"8px"},children:r.label},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/worldinfo/[id]/index.tsx",lineNumber:343,columnNumber:49},void 0),e.jsxDEV("span",{style:{fontSize:"12px",color:"#666"},children:r.description},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/worldinfo/[id]/index.tsx",lineNumber:346,columnNumber:49},void 0)]},void 0,!0,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/worldinfo/[id]/index.tsx",lineNumber:342,columnNumber:45},void 0)},r.value,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/worldinfo/[id]/index.tsx",lineNumber:341,columnNumber:19},void 0))},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/worldinfo/[id]/index.tsx",lineNumber:339,columnNumber:33},void 0)},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/worldinfo/[id]/index.tsx",lineNumber:334,columnNumber:29},void 0),e.jsxDEV(o.Item,{name:"description",label:"描述",children:e.jsxDEV(x.TextArea,{rows:4,placeholder:"请输入世界信息描述（可选）"},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/worldinfo/[id]/index.tsx",lineNumber:356,columnNumber:33},void 0)},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/worldinfo/[id]/index.tsx",lineNumber:355,columnNumber:29},void 0),e.jsxDEV(o.Item,{children:e.jsxDEV(f,{type:"primary",htmlType:"submit",children:"保存修改"},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/worldinfo/[id]/index.tsx",lineNumber:362,columnNumber:33},void 0)},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/worldinfo/[id]/index.tsx",lineNumber:361,columnNumber:29},void 0)]},void 0,!0,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/worldinfo/[id]/index.tsx",lineNumber:329,columnNumber:25},void 0)},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/worldinfo/[id]/index.tsx",lineNumber:328,columnNumber:21},void 0)},"1",!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/worldinfo/[id]/index.tsx",lineNumber:327,columnNumber:17},void 0),e.jsxDEV(B,{tab:"绑定信息",children:e.jsxDEV(S,{title:"绑定信息",loading:K,extra:e.jsxDEV($,{children:[e.jsxDEV(f,{type:"primary",icon:e.jsxDEV(q,{},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/worldinfo/[id]/index.tsx",lineNumber:378,columnNumber:23},void 0),onClick:()=>_("character"),children:"绑定角色"},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/worldinfo/[id]/index.tsx",lineNumber:376,columnNumber:33},void 0),e.jsxDEV(f,{type:"primary",icon:e.jsxDEV(q,{},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/worldinfo/[id]/index.tsx",lineNumber:385,columnNumber:23},void 0),onClick:()=>_("story"),children:"绑定故事"},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/worldinfo/[id]/index.tsx",lineNumber:383,columnNumber:33},void 0)]},void 0,!0,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/worldinfo/[id]/index.tsx",lineNumber:375,columnNumber:13},void 0),children:c&&e.jsxDEV("div",{children:[e.jsxDEV("div",{style:{marginBottom:"16px"},children:[e.jsxDEV(T,{level:5,children:["绑定的角色 (",c.characterIds.length,")"]},void 0,!0,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/worldinfo/[id]/index.tsx",lineNumber:396,columnNumber:37},void 0),c.characterIds.length>0?e.jsxDEV(k,{size:"small",dataSource:c.characterIds,renderItem:r=>e.jsxDEV(k.Item,{children:e.jsxDEV(v,{color:"green",style:{cursor:"pointer"},onClick:()=>l(`/card/${r}`),children:r},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/worldinfo/[id]/index.tsx",lineNumber:408,columnNumber:53},void 0)},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/worldinfo/[id]/index.tsx",lineNumber:407,columnNumber:19},void 0)},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/worldinfo/[id]/index.tsx",lineNumber:403,columnNumber:17},void 0):e.jsxDEV("div",{style:{color:"#999",fontStyle:"italic"},children:"暂无绑定的角色"},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/worldinfo/[id]/index.tsx",lineNumber:420,columnNumber:17},void 0)]},void 0,!0,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/worldinfo/[id]/index.tsx",lineNumber:395,columnNumber:33},void 0),e.jsxDEV(le,{},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/worldinfo/[id]/index.tsx",lineNumber:424,columnNumber:33},void 0),e.jsxDEV("div",{children:[e.jsxDEV(T,{level:5,children:["绑定的故事 (",c.storyIds.length,")"]},void 0,!0,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/worldinfo/[id]/index.tsx",lineNumber:427,columnNumber:37},void 0),c.storyIds.length>0?e.jsxDEV(k,{size:"small",dataSource:c.storyIds,renderItem:r=>e.jsxDEV(k.Item,{children:e.jsxDEV(v,{color:"orange",children:r},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/worldinfo/[id]/index.tsx",lineNumber:439,columnNumber:53},void 0)},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/worldinfo/[id]/index.tsx",lineNumber:438,columnNumber:19},void 0)},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/worldinfo/[id]/index.tsx",lineNumber:434,columnNumber:17},void 0):e.jsxDEV("div",{style:{color:"#999",fontStyle:"italic"},children:"暂无绑定的故事"},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/worldinfo/[id]/index.tsx",lineNumber:445,columnNumber:17},void 0)]},void 0,!0,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/worldinfo/[id]/index.tsx",lineNumber:426,columnNumber:33},void 0)]},void 0,!0,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/worldinfo/[id]/index.tsx",lineNumber:394,columnNumber:13},void 0)},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/worldinfo/[id]/index.tsx",lineNumber:371,columnNumber:21},void 0)},"2",!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/worldinfo/[id]/index.tsx",lineNumber:370,columnNumber:17},void 0),e.jsxDEV(B,{tab:"条目列表",children:e.jsxDEV(S,{title:"条目列表",extra:e.jsxDEV(f,{type:"primary",icon:e.jsxDEV(se,{},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/worldinfo/[id]/index.tsx",lineNumber:456,columnNumber:49},void 0),onClick:Q,children:"添加条目"},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/worldinfo/[id]/index.tsx",lineNumber:456,columnNumber:20},void 0),children:e.jsxDEV(me,{columns:ne,dataSource:V,rowKey:"id",loading:O},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/worldinfo/[id]/index.tsx",lineNumber:458,columnNumber:25},void 0)},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/worldinfo/[id]/index.tsx",lineNumber:454,columnNumber:21},void 0)},"3",!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/worldinfo/[id]/index.tsx",lineNumber:453,columnNumber:17},void 0)]},void 0,!0,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/worldinfo/[id]/index.tsx",lineNumber:326,columnNumber:13},void 0),P&&e.jsxDEV(fe,{visible:P,onCancel:()=>j(!1),onOk:Z,initialValues:null,title:"添加条目"},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/worldinfo/[id]/index.tsx",lineNumber:470,columnNumber:7},void 0),e.jsxDEV(R,{title:`绑定到${b==="character"?"角色":"故事"}`,open:U,onCancel:()=>g(!1),footer:null,children:e.jsxDEV(o,{form:h,layout:"vertical",onFinish:ee,children:[e.jsxDEV(o.Item,{name:"targetId",label:`${b==="character"?"角色":"故事"}ID`,rules:[{required:!0,message:`请输入${b==="character"?"角色":"故事"}ID`}],children:e.jsxDEV(x,{placeholder:`请输入要绑定的${b==="character"?"角色":"故事"}ID`},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/worldinfo/[id]/index.tsx",lineNumber:496,columnNumber:25},void 0)},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/worldinfo/[id]/index.tsx",lineNumber:491,columnNumber:21},void 0),e.jsxDEV(o.Item,{children:e.jsxDEV($,{children:[e.jsxDEV(f,{type:"primary",htmlType:"submit",children:"确认绑定"},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/worldinfo/[id]/index.tsx",lineNumber:500,columnNumber:29},void 0),e.jsxDEV(f,{onClick:()=>g(!1),children:"取消"},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/worldinfo/[id]/index.tsx",lineNumber:503,columnNumber:29},void 0)]},void 0,!0,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/worldinfo/[id]/index.tsx",lineNumber:499,columnNumber:25},void 0)},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/worldinfo/[id]/index.tsx",lineNumber:498,columnNumber:21},void 0)]},void 0,!0,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/worldinfo/[id]/index.tsx",lineNumber:486,columnNumber:17},void 0)},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/worldinfo/[id]/index.tsx",lineNumber:480,columnNumber:13},void 0)]},void 0,!0,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/worldinfo/[id]/index.tsx",lineNumber:311,columnNumber:5},void 0)};export{ge as default};
