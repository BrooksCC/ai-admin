import{j as e,D as he,d as xe}from"./index-DRQO0BkJ.js";import{r as h,u as De,e as Ie}from"./react-DR1zDSRy.js";import{d as H,B as $,ab as Ce,ac as ce,i as Q,F as S,e as je,M as J,I as ue,s as V,C as Ae,c as Re,v as Oe,S as ge,f as ve,X as Me,y as We,g as Ge,j as $e}from"./antd-Sq0EuMdw.js";import{B as we}from"./Button-BNh76MXg.js";import{W as ae}from"./worldinfo-service-Dss3L7Fz.js";import{a as ke,g as Be,u as Ke}from"./character-BOe8cyEe.js";import{A as Le}from"./admin-service-BUpGHG4_.js";import"./echarts-C5AzJBXJ.js";const _e=({value:r=[],onChange:n})=>{const[a,s]=h.useState(""),[d,E]=h.useState(""),g=Array.isArray(r)?r:[];h.useEffect(()=>{g.length>0&&!a&&(s(g[0]),E(g[0]))},[g,a]);const m=c=>{s(c),E(c)},f=c=>{E(c.target.value)},C=()=>{if(!d.trim()||!n)return;const c=[...g],b=c.indexOf(a),v=[...c];b>=0?v[b]=d:v.push(d),n(v),s(""),E("")},I=c=>{if(!n)return;const b=g.filter(v=>v!==c);n(b),a===c&&(s(""),E(""))};return e.jsxDEV("div",{className:"mb-4",children:[e.jsxDEV("div",{className:"mb-2",children:e.jsxDEV(H,{placeholder:"选择要编辑的问候语或创建新问候语",onChange:m,value:a,allowClear:!0,style:{width:"100%"},options:g.map(c=>({label:e.jsxDEV("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxDEV("span",{style:{flexGrow:1,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:c.length>25?`${c.substring(0,25)}...`:c},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/card/[id]/components/GreetingsEditor.tsx",lineNumber:82,columnNumber:33},void 0),e.jsxDEV($,{type:"text",danger:!0,icon:e.jsxDEV(Ce,{},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/card/[id]/components/GreetingsEditor.tsx",lineNumber:88,columnNumber:23},void 0),onClick:b=>{b.stopPropagation(),I(c)},size:"small",style:{marginLeft:"8px"}},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/card/[id]/components/GreetingsEditor.tsx",lineNumber:85,columnNumber:33},void 0)]},void 0,!0,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/card/[id]/components/GreetingsEditor.tsx",lineNumber:81,columnNumber:13},void 0),value:c}))},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/card/[id]/components/GreetingsEditor.tsx",lineNumber:73,columnNumber:17},void 0)},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/card/[id]/components/GreetingsEditor.tsx",lineNumber:72,columnNumber:13},void 0),e.jsxDEV("div",{className:"mb-2",children:e.jsxDEV(ce,{value:d,onChange:f,autoSize:{minRows:1,maxRows:15},placeholder:"编辑问候语内容"},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/card/[id]/components/GreetingsEditor.tsx",lineNumber:104,columnNumber:17},void 0)},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/card/[id]/components/GreetingsEditor.tsx",lineNumber:103,columnNumber:13},void 0),e.jsxDEV("div",{className:"flex justify-end",children:e.jsxDEV($,{type:"primary",size:"small",onClick:C,disabled:!d.trim(),children:a?"更新问候语":"添加问候语"},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/card/[id]/components/GreetingsEditor.tsx",lineNumber:113,columnNumber:17},void 0)},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/card/[id]/components/GreetingsEditor.tsx",lineNumber:112,columnNumber:13},void 0)]},void 0,!0,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/card/[id]/components/GreetingsEditor.tsx",lineNumber:71,columnNumber:5},void 0)},{Text:oe}=Q,Fe=({character:r,renderFormItem:n,handleAuditCharacter:a,auditing:s,handleFormChange:d})=>r?e.jsxDEV(e.Fragment,{children:[e.jsxDEV("div",{className:"p-4 bg-rose-50 rounded-md mb-4 border border-rose-200",children:e.jsxDEV(oe,{type:"danger",children:"此区域用于审核角色信息。请确认所有内容符合社区规范和平台政策。"},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/card/[id]/components/ReviewTab.tsx",lineNumber:27,columnNumber:17},void 0)},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/card/[id]/components/ReviewTab.tsx",lineNumber:26,columnNumber:13},void 0),e.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxDEV("div",{className:"col-span-1",children:e.jsxDEV("div",{className:"aspect-square overflow-hidden rounded-lg mb-4 border-2 border-rose-300",children:e.jsxDEV("img",{src:r.avatarUrl,alt:r.name,className:"w-full h-full object-cover",style:{filter:r.shouldBlurAvatar?"blur(8px)":"none"}},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/card/[id]/components/ReviewTab.tsx",lineNumber:34,columnNumber:25},void 0)},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/card/[id]/components/ReviewTab.tsx",lineNumber:33,columnNumber:21},void 0)},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/card/[id]/components/ReviewTab.tsx",lineNumber:32,columnNumber:17},void 0),e.jsxDEV("div",{className:"col-span-2",children:[n("avatarUrl","角色头像URL"),n("visibility","可见性","select"),n("characterVersion","角色版本"),e.jsxDEV("div",{className:"p-3 bg-gray-50 rounded-lg border border-gray-200 mb-4",children:[e.jsxDEV(oe,{strong:!0,children:"审核状态: "},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/card/[id]/components/ReviewTab.tsx",lineNumber:51,columnNumber:25},void 0),e.jsxDEV(oe,{type:r.auditStatus==="approved"?"success":r.auditStatus==="rejected"?"danger":"warning",children:r.auditStatus==="approved"?"已通过":r.auditStatus==="rejected"?"已拒绝":r.auditStatus==="pending"?"待审核":"无审核状态"},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/card/[id]/components/ReviewTab.tsx",lineNumber:52,columnNumber:25},void 0)]},void 0,!0,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/card/[id]/components/ReviewTab.tsx",lineNumber:50,columnNumber:21},void 0),e.jsxDEV("div",{className:"flex justify-between items-center mb-4",children:[e.jsxDEV("div",{className:"font-normal text-base",children:"模糊显示头像"},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/card/[id]/components/ReviewTab.tsx",lineNumber:67,columnNumber:25},void 0),e.jsxDEV(S.Item,{name:"shouldBlurAvatar",valuePropName:"checked",className:"mb-0",style:{marginBottom:0},children:e.jsxDEV(je,{onChange:d},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/card/[id]/components/ReviewTab.tsx",lineNumber:74,columnNumber:29},void 0)},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/card/[id]/components/ReviewTab.tsx",lineNumber:68,columnNumber:25},void 0)]},void 0,!0,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/card/[id]/components/ReviewTab.tsx",lineNumber:66,columnNumber:21},void 0),e.jsxDEV("div",{className:"mt-4 flex justify-end",children:[e.jsxDEV($,{type:"primary",danger:!0,className:"mr-2",onClick:()=>a(!1),loading:s,children:"拒绝"},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/card/[id]/components/ReviewTab.tsx",lineNumber:79,columnNumber:25},void 0),e.jsxDEV($,{type:"primary",onClick:()=>a(!0),loading:s,children:"通过审核"},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/card/[id]/components/ReviewTab.tsx",lineNumber:88,columnNumber:25},void 0)]},void 0,!0,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/card/[id]/components/ReviewTab.tsx",lineNumber:78,columnNumber:21},void 0)]},void 0,!0,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/card/[id]/components/ReviewTab.tsx",lineNumber:44,columnNumber:17},void 0)]},void 0,!0,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/card/[id]/components/ReviewTab.tsx",lineNumber:31,columnNumber:13},void 0)]},void 0,!0,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/card/[id]/components/ReviewTab.tsx",lineNumber:25,columnNumber:5},void 0):null;var Ve;let Te;function Pe(r,n,a,s,d,E){var g,m,f,C,I,c,b,v=Symbol.metadata||Symbol.for("Symbol.metadata"),w=Object.defineProperty,M=Object.create,K=[M(null),M(null)],o=n.length;function p(t,A,R){return function(N,k){A&&(k=N,N=r);for(var W=0;W<t.length;W++)k=t[W].apply(N,R?[k]:[]);return R?k:N}}function x(t,A,R,N){if(typeof t!="function"&&(N||t!==void 0))throw new TypeError(A+" must "+(R||"be")+" a function"+(N?"":" or undefined"));return t}function _(t,A,R,N,k,W,L,y,i,u,l){function D(T){if(!l(T))throw new TypeError("Attempted to access private element on non-instance")}var B=[].concat(A[0]),P=A[3],U=!L,X=k===1,me=k===3,le=k===4,Z=k===2;function ee(T,q,be){return function(ne,Ne){return q&&(Ne=ne,ne=t),be&&be(ne),j[T].call(ne,Ne)}}if(!U){var j={},te=[],z=me?"get":le||X?"set":"value";if(i?(u||X?j={get:Ee(function(){return P(this)},N,"get"),set:function(T){A[4](this,T)}}:j[z]=P,u||Ee(j[z],N,Z?"":z)):u||(j=Object.getOwnPropertyDescriptor(t,N)),!u&&!i){if((m=K[+y][N])&&(m^k)!=7)throw Error("Decorating two elements with the same name ("+j[z].name+") is not supported yet");K[+y][N]=k<3?1:k}}for(var O=t,re=B.length-1;re>=0;re-=R?2:1){var pe=x(B[re],"A decorator","be",!0),fe=R?B[re-1]:void 0,se={},Y={kind:["field","accessor","method","getter","setter","class"][k],name:N,metadata:g,addInitializer:(function(T,q){if(T.v)throw new TypeError("attempted to call addInitializer after decoration was finished");x(q,"An initializer","be",!0),W.push(q)}).bind(null,se)};if(U)m=pe.call(fe,O,Y),se.v=1,x(m,"class decorators","return")&&(O=m);else if(Y.static=y,Y.private=i,m=Y.access={has:i?l.bind():function(T){return N in T}},le||(m.get=i?Z?function(T){return D(T),j.value}:ee("get",0,D):function(T){return T[N]}),Z||me||(m.set=i?ee("set",0,D):function(T,q){T[N]=q}),O=pe.call(fe,X?{get:j.get,set:j.set}:j[z],Y),se.v=1,X){if(typeof O=="object"&&O)(m=x(O.get,"accessor.get"))&&(j.get=m),(m=x(O.set,"accessor.set"))&&(j.set=m),(m=x(O.init,"accessor.init"))&&te.unshift(m);else if(O!==void 0)throw new TypeError("accessor decorators must return an object with get, set, or init properties or undefined")}else x(O,(u?"field":"method")+" decorators","return")&&(u?te.unshift(O):j[z]=O)}return k<2&&L.push(p(te,y,1),p(W,y,0)),u||U||(i?X?L.splice(-1,0,ee("get",y),ee("set",y)):L.push(Z?j[z]:x.call.bind(j[z])):w(t,N,j)),O}function F(t){return w(t,v,{configurable:!0,enumerable:!0,value:g})}return g=M(g??null),I=[],c=function(t){t&&I.push(p(t))},b=function(t,A){for(var R=0;R<a.length;R++){var N=a[R],k=N[1],W=7&k;if((8&k)==t&&!W==A){var L=N[2],y=!!N[3],i=16&k;_(t?r:r.prototype,N,i,y?"#"+L:ze(L),W,W<2?[]:t?C=C||[]:f=f||[],I,!!t,y,A,t&&y?function(u){return qe(u)===r}:d)}}},b(8,0),b(0,0),b(8,1),b(0,1),c(f),c(C),m=I,o||F(r),{e:m,get c(){var t=[];return o&&[F(r=_(r,[n],s,r.name,5,t)),p(t,1)]}}}function ze(r){var n=Ue(r,"string");return typeof n=="symbol"?n:n+""}function Ue(r,n){if(typeof r!="object"||!r)return r;var a=r[Symbol.toPrimitive];if(a!==void 0){var s=a.call(r,n);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(r)}function Ee(r,n,a){typeof n=="symbol"&&(n=(n=n.description)?"["+n+"]":"");try{Object.defineProperty(r,"name",{configurable:!0,value:a?a+" "+n:n})}catch{}return r}function qe(r){if(Object(r)!==r)throw TypeError("right-hand side of 'in' should be an object, got "+(r!==null?typeof r:"null"));return r}let Se;class He{async getModels(){try{return(await xe.models.getModels()).data}catch(n){throw console.error("Failed to get models:",n),n}}async generateText(n){try{const a={textGenerationRequestDto:n};return(await xe.models.generateText(a)).data}catch(a){throw console.error("Failed to generate text:",a),a}}}Ve=He;[Se,Te]=Pe(Ve,[he,he.Singleton],[],1).c;Te();const ye=new Se,Je=({renderFormItem:r,form:n,handleFormChange:a})=>{const[s,d]=h.useState({shortIntroduction:!1,introduction:!1}),[E,g]=h.useState(null),[m,f]=h.useState(!0),[C,I]=h.useState(null);h.useEffect(()=>{(async()=>{try{f(!0);const w=(await ye.getModels()).models.find(M=>M.name==="DeepSeek-V3");!w||!w.id?(I("DeepSeek-V3模型未找到"),console.error("DeepSeek-V3 model not found in available models")):g(w)}catch(v){I("获取模型列表失败"),console.error("Error fetching models:",v)}finally{f(!1)}})()},[]);const c=async(b,v)=>{if(console.log(b,v),!E){console.error("无法生成文本：DeepSeek-V3模型未找到或尚未加载");return}d(w=>({...w,[b]:!0}));try{const w=n.getFieldValue("description");if(!w){console.warn(`Cannot generate text for ${v}: 'Character Description' is empty.`);return}const M=`根据以下角色描述，生成一个不超过50个汉字的简介，纯字符串，不要包含任何其他信息，不要使用markdown格式：

 角色描述: "${w}"`,K=`根据以下角色描述，生成一个不超过300个汉字的简介，需要包含角色性格、背景、经历、爱好、特长、目标、梦想等，纯字符串，不要包含任何其他信息，不要使用markdown格式：

 角色描述: "${w}"`,o={prompt:b==="shortIntroduction"?M:K,extraParams:{}},p=await ye.generateText(o),x=p.content;console.log(x),typeof x=="string"?(n.setFieldsValue({[b]:x}),a()):console.error(`Failed to generate text for ${v}: Invalid response format from AI.`,p)}catch(w){console.error(`Error generating text for ${v}:`,w)}finally{d(w=>({...w,[b]:!1}))}};return m?e.jsxDEV("div",{className:"text-center py-4",children:"正在加载可用模型..."},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/card/[id]/components/KeyOptionsTab.tsx",lineNumber:101,columnNumber:12},void 0):C?e.jsxDEV("div",{className:"text-center py-4 text-red-500",children:C},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/card/[id]/components/KeyOptionsTab.tsx",lineNumber:105,columnNumber:12},void 0):e.jsxDEV(e.Fragment,{children:[e.jsxDEV("div",{className:"grid grid-cols-3 gap-4 mb-4 items-end",children:[e.jsxDEV("div",{className:"col-span-1",children:r("categoryIds","角色分类","categories")},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/card/[id]/components/KeyOptionsTab.tsx",lineNumber:112,columnNumber:17},void 0),e.jsxDEV("div",{className:"col-span-1",children:r("tags","角色标签","tags")},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/card/[id]/components/KeyOptionsTab.tsx",lineNumber:113,columnNumber:17},void 0),e.jsxDEV("div",{className:"col-span-1",children:r("name","角色名称")},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/card/[id]/components/KeyOptionsTab.tsx",lineNumber:114,columnNumber:17},void 0)]},void 0,!0,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/card/[id]/components/KeyOptionsTab.tsx",lineNumber:111,columnNumber:13},void 0),e.jsxDEV("div",{className:"mb-4",children:[e.jsxDEV("label",{className:"form-label",htmlFor:"shortIntroduction",children:"角色简介"},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/card/[id]/components/KeyOptionsTab.tsx",lineNumber:120,columnNumber:17},void 0),e.jsxDEV("div",{className:"flex items-start gap-2",children:[e.jsxDEV("div",{className:"flex-grow",children:r("shortIntroduction","","textarea")},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/card/[id]/components/KeyOptionsTab.tsx",lineNumber:122,columnNumber:21},void 0),e.jsxDEV(we,{onClick:()=>c("shortIntroduction","角色简介"),disabled:s.shortIntroduction||!E,children:s.shortIntroduction?"生成中...":"AI 生成"},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/card/[id]/components/KeyOptionsTab.tsx",lineNumber:125,columnNumber:21},void 0)]},void 0,!0,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/card/[id]/components/KeyOptionsTab.tsx",lineNumber:121,columnNumber:17},void 0)]},void 0,!0,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/card/[id]/components/KeyOptionsTab.tsx",lineNumber:119,columnNumber:13},void 0),e.jsxDEV("div",{className:"mb-4",children:[e.jsxDEV("label",{className:"form-label",htmlFor:"introduction",children:"角色详细介绍"},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/card/[id]/components/KeyOptionsTab.tsx",lineNumber:137,columnNumber:17},void 0),e.jsxDEV("div",{className:"flex items-start gap-2",children:[e.jsxDEV("div",{className:"flex-grow",children:r("introduction","","textarea")},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/card/[id]/components/KeyOptionsTab.tsx",lineNumber:139,columnNumber:21},void 0),e.jsxDEV(we,{onClick:()=>c("introduction","角色详细介绍"),disabled:s.introduction||!E,children:s.introduction?"生成中...":"AI 生成"},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/card/[id]/components/KeyOptionsTab.tsx",lineNumber:142,columnNumber:21},void 0)]},void 0,!0,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/card/[id]/components/KeyOptionsTab.tsx",lineNumber:138,columnNumber:17},void 0)]},void 0,!0,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/card/[id]/components/KeyOptionsTab.tsx",lineNumber:136,columnNumber:13},void 0),r("description","角色描述","textarea"),r("greetings","备选问候语","greetingsEditor")]},void 0,!0,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/card/[id]/components/KeyOptionsTab.tsx",lineNumber:109,columnNumber:5},void 0)},Xe=({renderFormItem:r})=>e.jsxDEV(e.Fragment,{children:[r("personality","性格特点","textarea"),r("backgroundStory","背景故事","textarea",{rows:6}),r("behaviors","行为习惯","textarea")]},void 0,!0,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/card/[id]/components/PersonalityTab.tsx",lineNumber:7,columnNumber:5},void 0),Ye=({renderFormItem:r})=>e.jsxDEV(e.Fragment,{children:[r("languageStyle","语言风格","textarea"),r("expressionStyle","表达方式","textarea"),r("firstMessage","首次发言","textarea"),r("scenario","场景设定","textarea")]},void 0,!0,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/card/[id]/components/ConversationTab.tsx",lineNumber:7,columnNumber:5},void 0),Qe=({renderFormItem:r})=>e.jsxDEV(e.Fragment,{children:[r("systemPrompt","系统提示词","textarea",{rows:6}),r("postHistoryInstructions","历史记录后指令","textarea"),r("creatorNotes","创作者笔记","textarea")]},void 0,!0,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/card/[id]/components/AdvancedTab.tsx",lineNumber:7,columnNumber:5},void 0),{Text:de}=Q,Ze=({character:r})=>r?e.jsxDEV(e.Fragment,{children:[e.jsxDEV("div",{className:"p-4 bg-gray-50 rounded-md mb-4",children:e.jsxDEV(de,{type:"secondary",children:"这里显示了AI模型的相关设置，包括使用的模型、参数等。 这些设置通常由系统维护，部分设置需要管理员权限才能修改。"},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/card/[id]/components/AiSettingsTab.tsx",lineNumber:17,columnNumber:17},void 0)},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/card/[id]/components/AiSettingsTab.tsx",lineNumber:16,columnNumber:13},void 0),r&&r.aiSettings&&Object.entries(r.aiSettings).map(([n,a])=>e.jsxDEV("div",{className:"mb-3",children:[e.jsxDEV(de,{strong:!0,children:[n,":"," "]},void 0,!0,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/card/[id]/components/AiSettingsTab.tsx",lineNumber:25,columnNumber:21},void 0),e.jsxDEV(de,{children:typeof a=="object"?JSON.stringify(a):String(a)},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/card/[id]/components/AiSettingsTab.tsx",lineNumber:30,columnNumber:21},void 0)]},n,!0,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/card/[id]/components/AiSettingsTab.tsx",lineNumber:24,columnNumber:7},void 0))]},void 0,!0,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/card/[id]/components/AiSettingsTab.tsx",lineNumber:15,columnNumber:5},void 0):null,{Text:G}=Q,er=({character:r})=>{var n;return r?e.jsxDEV("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxDEV("div",{className:"p-4 border rounded-md",children:[e.jsxDEV(G,{strong:!0,children:"创建时间: "},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/card/[id]/components/StatsTab.tsx",lineNumber:17,columnNumber:17},void 0),e.jsxDEV(G,{children:new Date(r.createdAt).toLocaleString()},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/card/[id]/components/StatsTab.tsx",lineNumber:18,columnNumber:17},void 0)]},void 0,!0,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/card/[id]/components/StatsTab.tsx",lineNumber:16,columnNumber:13},void 0),e.jsxDEV("div",{className:"p-4 border rounded-md",children:[e.jsxDEV(G,{strong:!0,children:"更新时间: "},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/card/[id]/components/StatsTab.tsx",lineNumber:21,columnNumber:17},void 0),e.jsxDEV(G,{children:new Date(r.updatedAt).toLocaleString()},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/card/[id]/components/StatsTab.tsx",lineNumber:22,columnNumber:17},void 0)]},void 0,!0,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/card/[id]/components/StatsTab.tsx",lineNumber:20,columnNumber:13},void 0),e.jsxDEV("div",{className:"p-4 border rounded-md",children:[e.jsxDEV(G,{strong:!0,children:"人气: "},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/card/[id]/components/StatsTab.tsx",lineNumber:25,columnNumber:17},void 0),e.jsxDEV(G,{children:r.popularity},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/card/[id]/components/StatsTab.tsx",lineNumber:26,columnNumber:17},void 0)]},void 0,!0,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/card/[id]/components/StatsTab.tsx",lineNumber:24,columnNumber:13},void 0),e.jsxDEV("div",{className:"p-4 border rounded-md",children:[e.jsxDEV(G,{strong:!0,children:"聊天数: "},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/card/[id]/components/StatsTab.tsx",lineNumber:29,columnNumber:17},void 0),e.jsxDEV(G,{children:r.useCount},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/card/[id]/components/StatsTab.tsx",lineNumber:30,columnNumber:17},void 0)]},void 0,!0,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/card/[id]/components/StatsTab.tsx",lineNumber:28,columnNumber:13},void 0),e.jsxDEV("div",{className:"p-4 border rounded-md",children:[e.jsxDEV(G,{strong:!0,children:"创建者: "},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/card/[id]/components/StatsTab.tsx",lineNumber:33,columnNumber:17},void 0),e.jsxDEV(G,{children:((n=r.creator)==null?void 0:n.nickname)||"未知"},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/card/[id]/components/StatsTab.tsx",lineNumber:34,columnNumber:17},void 0)]},void 0,!0,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/card/[id]/components/StatsTab.tsx",lineNumber:32,columnNumber:13},void 0),e.jsxDEV("div",{className:"p-4 border rounded-md",children:[e.jsxDEV(G,{strong:!0,children:"ID: "},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/card/[id]/components/StatsTab.tsx",lineNumber:37,columnNumber:17},void 0),e.jsxDEV(G,{children:r.id},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/card/[id]/components/StatsTab.tsx",lineNumber:38,columnNumber:17},void 0)]},void 0,!0,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/card/[id]/components/StatsTab.tsx",lineNumber:36,columnNumber:13},void 0)]},void 0,!0,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/card/[id]/components/StatsTab.tsx",lineNumber:15,columnNumber:5},void 0):null},rr=({visible:r,isApprove:n,auditing:a,auditReason:s,commonRejectReasons:d,onOk:E,onCancel:g,onReasonChange:m})=>e.jsxDEV(J,{title:n?"通过审核":"拒绝理由",open:r,onOk:E,onCancel:g,confirmLoading:a,children:n?e.jsxDEV(ue,{placeholder:"输入通过理由（可选）",defaultValue:"符合平台规范",onChange:f=>m(f.target.value)},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/card/[id]/components/AuditModal.tsx",lineNumber:35,columnNumber:7},void 0):e.jsxDEV(e.Fragment,{children:[e.jsxDEV(H,{style:{width:"100%",marginBottom:"10px"},placeholder:"选择拒绝理由",onChange:f=>m(f),allowClear:!0,children:d.map(f=>e.jsxDEV(H.Option,{value:f,children:f},f,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/card/[id]/components/AuditModal.tsx",lineNumber:50,columnNumber:11},void 0))},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/card/[id]/components/AuditModal.tsx",lineNumber:43,columnNumber:25},void 0),e.jsxDEV(ce,{placeholder:"或输入自定义拒绝理由",value:s,onChange:f=>m(f.target.value),autoSize:{minRows:3,maxRows:5}},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/card/[id]/components/AuditModal.tsx",lineNumber:55,columnNumber:25},void 0)]},void 0,!0,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/card/[id]/components/AuditModal.tsx",lineNumber:42,columnNumber:7},void 0)},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/card/[id]/components/AuditModal.tsx",lineNumber:26,columnNumber:5},void 0),{Title:nr}=Q,ar=({characterId:r})=>{const n=De(),[a]=S.useForm(),[s,d]=h.useState([]),[E,g]=h.useState(!1),[m,f]=h.useState(!1),[C,I]=h.useState(!1),c=h.useCallback(async()=>{if(r){g(!0);try{const o=await ae.getReverseBindings(r,"character");if(o.worldInfoIds&&o.worldInfoIds.length>0){const p=o.worldInfoIds.map(_=>ae.getWorldInfoById(_).catch(F=>(console.error(`Failed to fetch world info ${_}:`,F),null))),x=await Promise.all(p);d(x.filter(Boolean))}else d([])}catch(o){console.error("Failed to fetch bindings:",o),V.error("获取绑定信息失败")}finally{g(!1)}}},[r]);h.useEffect(()=>{c()},[r,c]);const b=async o=>{if(!r){V.error("角色ID不存在");return}I(!0);try{await ae.associateWithCharacter(o.worldInfoId,r),V.success("绑定世界书成功"),f(!1),a.resetFields(),c()}catch(p){console.error("Failed to bind world info:",p),p instanceof Error?V.error(`绑定失败: ${p.message}`):V.error("绑定失败，请稍后重试")}finally{I(!1)}},v=(o,p)=>{J.confirm({title:"确认解绑",content:`确定要解绑世界书"${p}"吗？`,onOk:async()=>{try{await ae.associateWithCharacter(o,null,r),V.success("解绑世界书成功"),c()}catch(x){console.error("Failed to unbind world info:",x),x instanceof Error?V.error(`解绑失败: ${x.message}`):V.error("解绑失败，请稍后重试")}}})},w=o=>({GLOBAL:"blue",CHARACTER:"green",CHAT:"orange",PERSONA:"purple",USER:"default"})[o]||"default",M=o=>({GLOBAL:"全局世界书",CHARACTER:"角色世界书",CHAT:"对话世界书",PERSONA:"个人世界书",USER:"用户自定义"})[o]||o,K=[{title:"世界书ID",dataIndex:"id",key:"id",width:280,ellipsis:!0,render:o=>e.jsxDEV("a",{onClick:()=>n(`/worldinfo/${o}`),children:o},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/card/[id]/components/WorldInfoTab.tsx",lineNumber:138,columnNumber:5},void 0)},{title:"名称",dataIndex:"name",key:"name",ellipsis:!0},{title:"类型",dataIndex:"type",key:"type",render:o=>e.jsxDEV(ve,{color:w(o),children:M(o)},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/card/[id]/components/WorldInfoTab.tsx",lineNumber:152,columnNumber:5},void 0)},{title:"描述",dataIndex:"description",key:"description",ellipsis:!0},{title:"条目数量",dataIndex:"entryCount",key:"entryCount"},{title:"状态",dataIndex:"isActive",key:"isActive",render:o=>e.jsxDEV(ve,{color:o?"green":"red",children:o?"启用":"禁用"},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/card/[id]/components/WorldInfoTab.tsx",lineNumber:173,columnNumber:5},void 0)},{title:"操作",key:"action",render:(o,p)=>e.jsxDEV(ge,{size:"middle",children:[e.jsxDEV($,{type:"link",icon:e.jsxDEV(Me,{},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/card/[id]/components/WorldInfoTab.tsx",lineNumber:185,columnNumber:15},void 0),onClick:()=>n(`/worldinfo/${p.id}`),children:"查看"},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/card/[id]/components/WorldInfoTab.tsx",lineNumber:183,columnNumber:21},void 0),e.jsxDEV($,{type:"link",danger:!0,icon:e.jsxDEV(We,{},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/card/[id]/components/WorldInfoTab.tsx",lineNumber:193,columnNumber:15},void 0),onClick:()=>v(p.id,p.name),children:"解绑"},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/card/[id]/components/WorldInfoTab.tsx",lineNumber:190,columnNumber:21},void 0)]},void 0,!0,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/card/[id]/components/WorldInfoTab.tsx",lineNumber:182,columnNumber:5},void 0)}];return e.jsxDEV("div",{children:[e.jsxDEV(Ae,{title:e.jsxDEV("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxDEV(nr,{level:5,style:{margin:0},children:["绑定的世界书 (",s.length,")"]},void 0,!0,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/card/[id]/components/WorldInfoTab.tsx",lineNumber:208,columnNumber:25},void 0),e.jsxDEV($,{type:"primary",icon:e.jsxDEV(Oe,{},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/card/[id]/components/WorldInfoTab.tsx",lineNumber:215,columnNumber:19},void 0),onClick:()=>f(!0),children:"绑定世界书"},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/card/[id]/components/WorldInfoTab.tsx",lineNumber:213,columnNumber:25},void 0)]},void 0,!0,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/card/[id]/components/WorldInfoTab.tsx",lineNumber:207,columnNumber:9},void 0),loading:E,children:e.jsxDEV(Re,{columns:K,dataSource:s,rowKey:"id",pagination:!1,locale:{emptyText:"暂无绑定的世界书"}},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/card/[id]/components/WorldInfoTab.tsx",lineNumber:224,columnNumber:17},void 0)},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/card/[id]/components/WorldInfoTab.tsx",lineNumber:205,columnNumber:13},void 0),e.jsxDEV(J,{title:"绑定世界书",open:m,onCancel:()=>{f(!1),a.resetFields()},footer:null,children:e.jsxDEV(S,{form:a,layout:"vertical",onFinish:b,children:[e.jsxDEV(S.Item,{name:"worldInfoId",label:"世界书ID",rules:[{required:!0,message:"请输入世界书ID"}],children:e.jsxDEV(ue,{placeholder:"请输入要绑定的世界书ID"},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/card/[id]/components/WorldInfoTab.tsx",lineNumber:255,columnNumber:25},void 0)},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/card/[id]/components/WorldInfoTab.tsx",lineNumber:250,columnNumber:21},void 0),e.jsxDEV(S.Item,{children:e.jsxDEV(ge,{children:[e.jsxDEV($,{type:"primary",htmlType:"submit",loading:C,children:"确认绑定"},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/card/[id]/components/WorldInfoTab.tsx",lineNumber:259,columnNumber:29},void 0),e.jsxDEV($,{onClick:()=>{f(!1),a.resetFields()},children:"取消"},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/card/[id]/components/WorldInfoTab.tsx",lineNumber:266,columnNumber:29},void 0)]},void 0,!0,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/card/[id]/components/WorldInfoTab.tsx",lineNumber:258,columnNumber:25},void 0)},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/card/[id]/components/WorldInfoTab.tsx",lineNumber:257,columnNumber:21},void 0)]},void 0,!0,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/card/[id]/components/WorldInfoTab.tsx",lineNumber:245,columnNumber:17},void 0)},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/card/[id]/components/WorldInfoTab.tsx",lineNumber:236,columnNumber:13},void 0)]},void 0,!0,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/card/[id]/components/WorldInfoTab.tsx",lineNumber:204,columnNumber:5},void 0)},{Title:ir,Text:tr}=Q,ie=["name","description","shortIntroduction","introduction","avatarUrl","shouldBlurAvatar","personality","backgroundStory","behaviors","languageStyle","expressionStyle","firstMessage","scenario","messageExamples","systemPrompt","postHistoryInstructions","greetings","characterVersion","creatorNotes","sillyTavernRawData","categoryIds","tags","visibility"],sr=[{label:"公开",value:"public"},{label:"私有",value:"private"}];function br(){const n=Ie().id,a=De(),[s]=S.useForm(),[d,E]=h.useState(null),[g,m]=h.useState([]),[f,C]=h.useState(!0),[I,c]=h.useState(!1),[b,v]=h.useState(!1),[w,M]=h.useState({}),[K,o]=h.useState(!1),[p,x]=h.useState({visible:!1,isApprove:!1}),[_,F]=h.useState("");h.useEffect(()=>{if(!n){V.error("角色ID无效"),a("/card");return}async function i(){try{C(!0);const l=await ke(n);E(l);const D={};ie.forEach(B=>{B in l&&(D[B]=l[B])}),l.categories&&Array.isArray(l.categories)&&(D.categoryIds=l.categories.map(B=>B.id)),s.setFieldsValue(D),M(D)}catch(l){console.error("获取角色详情失败:",l),V.error("获取角色详情失败，请稍后重试")}finally{C(!1)}}async function u(){try{const l=await Be();l&&l.categories&&m(l.categories)}catch(l){console.error("获取类别数据失败:",l)}}i(),u()},[n,s,a]);const t=()=>{v(!0);const i=s.getFieldsValue();M(i),localStorage.setItem(`character_edit_${n}`,JSON.stringify(i))},A=async()=>{if(!n){V.error("角色ID无效");return}try{await s.validateFields();const i=s.getFieldsValue(),u={};ie.forEach(D=>{D in i&&(u[D]=i[D])}),c(!0),await Ke(n,u),localStorage.removeItem(`character_edit_${n}`),V.success("角色更新成功"),v(!1);const l=await ke(n);E(l)}catch(i){console.error("更新角色失败:",i),V.error(`更新角色失败: ${i.message||"请稍后重试"}`)}finally{c(!1)}},R=()=>{J.confirm({title:"确认取消",content:"您有未保存的更改，确定要取消吗？",onOk:()=>{if(d){const i={};ie.forEach(u=>{u in d&&(i[u]=d[u])}),s.setFieldsValue(i)}localStorage.removeItem(`character_edit_${n}`),v(!1)}})},N=()=>{b?J.confirm({title:"确认返回",content:"您有未保存的更改，确定要返回吗？",onOk:()=>a("/card")}):a("/card")},k=async i=>{if(!n){V.error("角色ID无效");return}if(b){J.confirm({title:"未保存的更改",content:"角色有未保存的更改，请先保存更改后再进行审核。",okText:"保存并审核",cancelText:"取消",onOk:async()=>{try{await A(),x({visible:!0,isApprove:i})}catch(u){console.error("保存并审核失败:",u)}}});return}x({visible:!0,isApprove:i})},W=async(i,u)=>{try{o(!0);const l={status:i?"approved":"rejected",reason:u},D=await Le.auditCharacter(n,"",l);E(D),V.success(i?"角色已通过审核":"角色已被拒绝")}catch(l){console.error("审核角色失败:",l),V.error(`审核失败: ${l.message||"请稍后重试"}`)}finally{o(!1),x({visible:!1,isApprove:!1}),F("")}},L=["不符合平台规范","头像内容不适宜","描述内容不适宜","对话示例不适宜","背景故事内容不适宜","行为习惯内容不适宜","系统提示词不适宜"],y=(i,u,l="input",D)=>{const B=ie.includes(i),{placeholder:P}=D||{};if(!B&&d)return e.jsxDEV(S.Item,{label:u,name:i,children:e.jsxDEV("div",{className:"read-only-field",children:l==="textarea"?e.jsxDEV("pre",{className:"whitespace-pre-wrap",children:d[i]},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/card/[id]/index.tsx",lineNumber:305,columnNumber:13},this):e.jsxDEV(tr,{children:d[i]},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/card/[id]/index.tsx",lineNumber:308,columnNumber:13},this)},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/card/[id]/index.tsx",lineNumber:302,columnNumber:21},this)},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/card/[id]/index.tsx",lineNumber:301,columnNumber:9},this);if(l==="greetingsEditor")return e.jsxDEV(S.Item,{label:u,name:i,valuePropName:"value",children:e.jsxDEV(_e,{onChange:t},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/card/[id]/index.tsx",lineNumber:319,columnNumber:21},this)},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/card/[id]/index.tsx",lineNumber:318,columnNumber:9},this);switch(l){case"textarea":return e.jsxDEV(S.Item,{label:u,name:i,children:e.jsxDEV(ce,{placeholder:P,onChange:t,autoSize:{minRows:1,maxRows:15}},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/card/[id]/index.tsx",lineNumber:329,columnNumber:25},this)},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/card/[id]/index.tsx",lineNumber:328,columnNumber:11},this);case"switch":return e.jsxDEV(S.Item,{label:u,name:i,valuePropName:"checked",children:e.jsxDEV(je,{onChange:t},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/card/[id]/index.tsx",lineNumber:339,columnNumber:25},this)},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/card/[id]/index.tsx",lineNumber:338,columnNumber:11},this);case"select":return e.jsxDEV(S.Item,{label:u,name:i,children:e.jsxDEV(H,{placeholder:P,options:sr,onChange:t},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/card/[id]/index.tsx",lineNumber:345,columnNumber:25},this)},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/card/[id]/index.tsx",lineNumber:344,columnNumber:11},this);case"tags":return e.jsxDEV(S.Item,{label:u,name:i,children:e.jsxDEV(H,{mode:"tags",placeholder:P||"请输入标签，按回车确认",onChange:t},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/card/[id]/index.tsx",lineNumber:355,columnNumber:25},this)},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/card/[id]/index.tsx",lineNumber:354,columnNumber:11},this);case"categories":return e.jsxDEV(S.Item,{label:u,name:i,children:e.jsxDEV(H,{mode:"multiple",placeholder:P||"请选择分类",options:g.map(U=>({label:U.name,value:U.id})),onChange:t},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/card/[id]/index.tsx",lineNumber:365,columnNumber:25},this)},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/card/[id]/index.tsx",lineNumber:364,columnNumber:11},this);default:return e.jsxDEV(S.Item,{label:u,name:i,children:e.jsxDEV(ue,{placeholder:P,onChange:t},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/card/[id]/index.tsx",lineNumber:376,columnNumber:25},this)},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/card/[id]/index.tsx",lineNumber:375,columnNumber:11},this)}};return f?e.jsxDEV("div",{className:"flex items-center justify-center h-full",children:e.jsxDEV(Ge,{size:"large",tip:"正在加载角色详情...",spinning:!0,children:e.jsxDEV("div",{className:"p-12"},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/card/[id]/index.tsx",lineNumber:387,columnNumber:21},this)},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/card/[id]/index.tsx",lineNumber:386,columnNumber:17},this)},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/card/[id]/index.tsx",lineNumber:385,columnNumber:7},this):e.jsxDEV("div",{className:"p-6",children:[e.jsxDEV("div",{className:"flex justify-between items-center mb-6",children:[e.jsxDEV(ir,{level:3,children:(d==null?void 0:d.name)||"角色详情"},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/card/[id]/index.tsx",lineNumber:397,columnNumber:17},this),e.jsxDEV("div",{children:[e.jsxDEV($,{onClick:N,className:"mr-2",children:"返回"},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/card/[id]/index.tsx",lineNumber:399,columnNumber:21},this),b&&e.jsxDEV(e.Fragment,{children:[e.jsxDEV($,{onClick:R,className:"mr-2",children:"取消"},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/card/[id]/index.tsx",lineNumber:402,columnNumber:29},this),e.jsxDEV($,{type:"primary",onClick:A,loading:I,children:"保存"},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/card/[id]/index.tsx",lineNumber:403,columnNumber:29},this)]},void 0,!0,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/card/[id]/index.tsx",lineNumber:401,columnNumber:11},this)]},void 0,!0,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/card/[id]/index.tsx",lineNumber:398,columnNumber:17},this)]},void 0,!0,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/card/[id]/index.tsx",lineNumber:396,columnNumber:13},this),e.jsxDEV(rr,{visible:p.visible,isApprove:p.isApprove,auditing:K,auditReason:_,commonRejectReasons:L,onOk:()=>W(p.isApprove,_||(p.isApprove?"符合平台规范":"不符合平台规范")),onCancel:()=>{x({visible:!1,isApprove:!1}),F("")},onReasonChange:F},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/card/[id]/index.tsx",lineNumber:416,columnNumber:13},this),d&&e.jsxDEV(S,{form:s,layout:"vertical",initialValues:w,children:e.jsxDEV($e,{defaultActiveKey:"review",items:[{key:"review",label:"审核",children:e.jsxDEV(Fe,{character:d,renderFormItem:y,handleAuditCharacter:k,auditing:K,handleFormChange:t},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/card/[id]/index.tsx",lineNumber:443,columnNumber:13},this)},{key:"keyOptions",label:"关键选项",children:e.jsxDEV(Je,{renderFormItem:y,form:s,handleFormChange:t},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/card/[id]/index.tsx",lineNumber:456,columnNumber:13},this)},{key:"personality",label:"角色设定",children:e.jsxDEV(Xe,{renderFormItem:y},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/card/[id]/index.tsx",lineNumber:463,columnNumber:13},this)},{key:"conversation",label:"对话设置",children:e.jsxDEV(Ye,{renderFormItem:y},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/card/[id]/index.tsx",lineNumber:470,columnNumber:13},this)},{key:"advanced",label:"高级设置",children:e.jsxDEV(Qe,{renderFormItem:y},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/card/[id]/index.tsx",lineNumber:477,columnNumber:13},this)},{key:"aiSettings",label:"AI模型设置",children:e.jsxDEV(Ze,{character:d},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/card/[id]/index.tsx",lineNumber:484,columnNumber:13},this)},{key:"stats",label:"统计信息",children:e.jsxDEV(er,{character:d},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/card/[id]/index.tsx",lineNumber:491,columnNumber:13},this)},{key:"worldInfo",label:"绑定世界书",children:e.jsxDEV(ar,{characterId:n},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/card/[id]/index.tsx",lineNumber:498,columnNumber:13},this)}]},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/card/[id]/index.tsx",lineNumber:436,columnNumber:21},this)},void 0,!1,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/card/[id]/index.tsx",lineNumber:431,columnNumber:7},this)]},void 0,!0,{fileName:"/home/runner/work/pure-admin-react/pure-admin-react/src/pages/card/[id]/index.tsx",lineNumber:395,columnNumber:5},this)}export{br as default};
